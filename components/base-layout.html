<!-- 기본 레이아웃 템플릿 -->
<!-- 이 템플릿은 모든 페이지에서 공통으로 사용되는 구조를 정의합니다 -->

<template id="base-layout-template">
    <!doctype html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        
        <!-- 보안 헤더 -->
        <meta
            http-equiv="Content-Security-Policy"
            content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; font-src 'self' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; img-src 'self' data: https:; connect-src 'self' https://sishloxzcqapontycuyz.supabase.co wss://sishloxzcqapontycuyz.supabase.co;"
        />
        
        <!-- 동적 타이틀 -->
        <title>{{PAGE_TITLE}} - WAVE space</title>
        
        <!-- Favicon -->
        <link rel="icon" type="image/x-icon" href="/favicon.ico">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        
        <!-- SEO 메타태그 -->
        <meta name="description" content="{{PAGE_DESCRIPTION}}" />
        <meta name="keywords" content="{{PAGE_KEYWORDS}}" />
        <meta name="author" content="WAVE SPACE Team" />
        <meta property="og:title" content="{{PAGE_TITLE}} - WAVE space" />
        <meta property="og:description" content="{{PAGE_DESCRIPTION}}" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="{{PAGE_URL}}" />
        <meta property="og:image" content="/images/og-image.png" />
        
        <!-- 환경 설정 로드 -->
        <script src="config.dev.js"></script>
        
        <!-- 보안 및 에러 핸들링 -->
        <script src="js/utils/xssProtection.js"></script>
        <script src="js/utils/errorHandler.js"></script>
        
        <!-- 공통 유틸리티 -->
        <script src="js/utils/logger.js"></script>
        <script src="js/utils/common.js"></script>
        <script src="js/utils/formatters.js"></script>
        
        <!-- 핵심 시스템 -->
        <script src="js/core/BaseSupabaseManager.js"></script>
        <script src="js/core/stateManager.js"></script>
        <script src="js/core/eventSystem.js"></script>
        <script src="js/core/WaveSpaceData.js"></script>
        
        <!-- 공통 CSS -->
        <link rel="stylesheet" href="common.css?v=7" />
        <link rel="stylesheet" href="styles.css?v=7" />
        <link rel="stylesheet" href="css/sidebar.css?v=7" />
        <link rel="stylesheet" href="css/page-transitions.css?v=7" />
        <link rel="stylesheet" href="mobile-fix.css?v=7" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
        
        <!-- 페이지별 CSS 슬롯 -->
        {{ADDITIONAL_CSS}}
        
        <!-- 페이지별 스크립트 슬롯 -->
        {{ADDITIONAL_SCRIPTS}}
        
        <!-- 기본 스크립트 -->
        <script src="preload.js"></script>
    </head>
    
    <body data-page="{{PAGE_NAME}}" class="page-loading">
        <!-- 전체 컨테이너 -->
        <div class="app-container">
            <!-- 사이드바 (동적 로드) -->
            <div id="sidebar-container">
                <!-- SidebarLoader가 동적으로 사이드바를 여기에 로드합니다 -->
            </div>

            <!-- 메인 콘텐츠 영역 -->
            <div class="main-container">
                <!-- 헤더 (동적 로드) -->
                <div id="header-container">
                    <!-- HeaderLoader가 동적으로 헤더를 여기에 로드합니다 -->
                </div>

                <!-- 메인 콘텐츠 슬롯 -->
                <main class="main-content">
                    {{PAGE_CONTENT}}
                </main>

                <!-- 푸터 (필요한 경우) -->
                <footer id="footer-container">
                    <!-- 푸터 내용 -->
                </footer>
            </div>
        </div>
        
        <!-- 전역 모달 컨테이너 -->
        <div id="modal-container"></div>
        
        <!-- 토스트 알림 컨테이너 -->
        <div id="toast-container"></div>
        
        <!-- 로딩 오버레이 -->
        <div id="loading-overlay" class="loading-overlay" style="display: none;">
            <div class="loading-spinner"></div>
            <div class="loading-text">로딩 중...</div>
        </div>
    </body>
    </html>
</template>