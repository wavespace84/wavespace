<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            http-equiv="Content-Security-Policy"
            content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; font-src 'self' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; img-src 'self' data: https:; connect-src 'self' https://sishloxzcqapontycuyz.supabase.co wss://sishloxzcqapontycuyz.supabase.co;"
        />
        <title>상점 - WAVE SPACE</title>
        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
        <script src="preload.js"></script>
        <link rel="stylesheet" href="common.css" />
        <link rel="stylesheet" href="styles.css?v=7" />
        <link rel="stylesheet" href="points-shop.css?v=4" />
        <link rel="stylesheet" href="mobile-fix.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    </head>
    <body>
        <!-- 전체 컨테이너 -->
        <div class="app-container">
            <!-- 사이드바 -->
            <aside class="sidebar">
                <!-- 로고 영역 -->
                <div class="sidebar-header">
                    <a href="index.html" class="logo-container">
                        <span class="logo-text">WAVE space</span>
                        <span class="beta-badge">BETA</span>
                    </a>
                </div>

                <!-- 슬로건 -->
                <div class="sidebar-slogan">
                    <p>대한민국 No.1 분양실무자 대표 커뮤니티</p>
                </div>

                <!-- 네비게이션 -->
                <nav class="sidebar-nav">
                    <!-- 안내 섹션 -->
                    <div class="nav-section">
                        <div class="nav-category">
                            <div class="nav-category-wrapper">
                                <button class="nav-category-button">
                                    <i class="fas fa-book-open"></i>
                                    <span>안내</span>
                                    <i class="fas fa-chevron-down nav-arrow"></i>
                                </button>
                                <div class="nav-items">
                                    <a href="notice.html" class="nav-item">
                                        <i class="fas fa-bullhorn"></i>
                                        <span>공지사항</span>
                                    </a>
                                    <a href="updates.html" class="nav-item">
                                        <i class="fas fa-info-circle"></i>
                                        <span>업데이트</span>
                                    </a>
                                    <a href="support.html" class="nav-item">
                                        <i class="fas fa-life-ring"></i>
                                        <span>고객센터</span>
                                    </a>
                                    <a href="plus-membership.html" class="nav-item">
                                        <i class="fas fa-rocket"></i>
                                        <span>+Plus Membership</span>
                                    </a>
                                    <a href="events.html" class="nav-item">
                                        <i class="fas fa-gift"></i>
                                        <span>이벤트</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 커뮤니티 섹션 -->
                    <div class="nav-section">
                        <div class="nav-category">
                            <div class="nav-category-wrapper">
                                <button class="nav-category-button">
                                    <i class="fas fa-users"></i>
                                    <span>커뮤니티</span>
                                    <i class="fas fa-chevron-down nav-arrow"></i>
                                </button>
                                <div class="nav-items">
                                    <a href="hall-of-fame.html" class="nav-item hall-of-fame highlighted">
                                        <i class="fas fa-trophy"></i>
                                        <span>명예의전당</span>
                                    </a>
                                    <a href="attendance.html" class="nav-item">
                                        <i class="fas fa-calendar-check"></i>
                                        <span>출석체크</span>
                                    </a>
                                    <a href="forum.html" class="nav-item">
                                        <i class="fas fa-comments"></i>
                                        <span>자유게시판</span>
                                    </a>
                                    <a href="humor.html" class="nav-item">
                                        <i class="fas fa-laugh"></i>
                                        <span>유머재미</span>
                                    </a>
                                    <a href="qna.html" class="nav-item">
                                        <i class="fas fa-question-circle"></i>
                                        <span>질문답변</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 구인구직 섹션 -->
                    <div class="nav-section">
                        <div class="nav-category">
                            <div class="nav-category-wrapper">
                                <button class="nav-category-button">
                                    <i class="fas fa-building"></i>
                                    <span>구인구직</span>
                                    <i class="fas fa-chevron-down nav-arrow"></i>
                                </button>
                                <div class="nav-items">
                                    <a href="planning-recruitment.html" class="nav-item">
                                        <i class="fas fa-project-diagram"></i>
                                        <span>분양기획</span>
                                    </a>
                                    <a href="sales-recruit.html" class="nav-item highlighted">
                                        <i class="fas fa-briefcase"></i>
                                        <span>분양영업</span>
                                        <span class="check-mark"></span>
                                    </a>
                                    <a href="ai-matching.html" class="nav-item">
                                        <i class="fas fa-robot"></i>
                                        <span>AI 매칭</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 분양자료 섹션 -->
                    <div class="nav-section">
                        <div class="nav-category">
                            <div class="nav-category-wrapper">
                                <button class="nav-category-button">
                                    <i class="fas fa-folder-open"></i>
                                    <span>분양자료</span>
                                    <i class="fas fa-chevron-down nav-arrow"></i>
                                </button>
                                <div class="nav-items">
                                    <a href="data-center.html" class="nav-item highlighted">
                                        <i class="fas fa-database"></i>
                                        <span>Data Center</span>
                                        <span class="check-mark"></span>
                                    </a>
                                    <a href="market-research.html" class="nav-item">
                                        <i class="fas fa-chart-line"></i>
                                        <span>시장조사서</span>
                                        <span class="check-mark"></span>
                                    </a>
                                    <a href="proposal.html" class="nav-item">
                                        <i class="fas fa-file-alt"></i>
                                        <span>제안서</span>
                                        <span class="check-mark"></span>
                                    </a>
                                    <a href="education.html" class="nav-item">
                                        <i class="fas fa-graduation-cap"></i>
                                        <span>교육자료</span>
                                        <span class="check-mark"></span>
                                    </a>
                                    <a href="policy.html" class="nav-item">
                                        <i class="fas fa-gavel"></i>
                                        <span>정책자료</span>
                                        <span class="check-mark"></span>
                                    </a>
                                    <a href="other-docs.html" class="nav-item">
                                        <i class="fas fa-archive"></i>
                                        <span>기타자료</span>
                                        <span class="check-mark"></span>
                                    </a>
                                    <a href="ai-report.html" class="nav-item">
                                        <i class="fas fa-robot"></i>
                                        <span>AI 보고서</span>
                                        <span class="check-mark"></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 포인트 섹션 -->
                    <div class="nav-section">
                        <div class="nav-category active">
                            <div class="nav-category-wrapper">
                                <button class="nav-category-button">
                                    <i class="fas fa-coins"></i>
                                    <span>포인트</span>
                                    <i class="fas fa-chevron-down nav-arrow"></i>
                                </button>
                                <div class="nav-items">
                                    <a href="points-policy.html" class="nav-item highlighted">
                                        <i class="fas fa-gem"></i>
                                        <span>포인트정책</span>
                                        <span class="check-mark"></span>
                                    </a>
                                    <a href="points-ranking.html" class="nav-item">
                                        <i class="fas fa-chart-bar"></i>
                                        <span>전체랭킹</span>
                                        <span class="check-mark"></span>
                                    </a>
                                    <a href="points-charge.html" class="nav-item">
                                        <i class="fas fa-credit-card"></i>
                                        <span>충전하기</span>
                                        <span class="check-mark"></span>
                                    </a>
                                    <a href="points-shop.html" class="nav-item active">
                                        <i class="fas fa-store"></i>
                                        <span>상점</span>
                                        <span class="check-mark"></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 미니게임 섹션 -->
                    <div class="nav-section minigame-section">
                        <div class="minigame-header">
                            <i class="fas fa-gamepad"></i>
                            <span>미니게임</span>
                        </div>
                        <div class="minigame-buttons">
                            <a href="/game" class="minigame-btn">
                                <i class="fas fa-gamepad"></i>
                                <span>모든 게임</span>
                            </a>
                            <a href="/game?open=roulette" class="minigame-btn">
                                <i class="fas fa-circle-notch"></i>
                                <span>룰렛</span>
                            </a>
                            <a href="/game?open=blackjack" class="minigame-btn">
                                <i class="fas fa-layer-group"></i>
                                <span>블랙잭</span>
                            </a>
                        </div>
                    </div>
                </nav>
            </aside>

            <!-- 메인 콘텐츠 영역 -->
            <div class="main-container">
                <!-- 헤더 (동적 로드) -->
                <div id="header-container">
                    <!-- HeaderLoader가 동적으로 헤더를 여기에 로드합니다 -->
                </div>

                <!-- 메인 콘텐츠 -->
                <main class="main-content">
                    <div class="points-shop-container">
                        <!-- 헤더 -->
                        <div class="points-shop-header">
                            <h1 class="points-shop-title">상점</h1>
                            <p class="points-shop-subtitle">포인트로 다양한 혜택을 구매하세요</p>
                        </div>

                        <!-- 포인트 상점 이용 가이드 -->
                        <div class="shop-guide-section">
                            <div class="guide-card">
                                <h3 class="guide-title">
                                    <i class="fas fa-lightbulb"></i>
                                    포인트 상점 이용 방법
                                </h3>
                                <div class="guide-grid">
                                    <div class="guide-item">
                                        <i class="fas fa-shopping-cart"></i>
                                        <span>원하는 상품을 선택하세요</span>
                                    </div>
                                    <div class="guide-item">
                                        <i class="fas fa-coins"></i>
                                        <span>보유 포인트로 구매하세요</span>
                                    </div>
                                    <div class="guide-item">
                                        <i class="fas fa-gift"></i>
                                        <span>즉시 혜택을 누리세요</span>
                                    </div>
                                    <div class="guide-item">
                                        <i class="fas fa-star"></i>
                                        <span>VIP 전용 혜택도 준비되어 있어요</span>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!-- 게임샵 섹션 -->
                        <div class="game-section">
                            <h2 class="section-title">게임샵</h2>
                            <p class="section-desc">게임 자유이용권과 경험치, 포인트 부스터 상품</p>
                            <div class="shop-grid" id="gameGrid">
                                <!-- JavaScript로 동적 생성 -->
                            </div>
                        </div>

                        <!-- 쿠폰샵 섹션 -->
                        <div class="coupon-section">
                            <h2 class="section-title">쿠폰샵</h2>
                            <p class="section-desc">할인 쿠폰과 특별 혜택 상품</p>
                            <div class="shop-grid" id="couponGrid">
                                <!-- JavaScript로 동적 생성 -->
                            </div>
                        </div>

                        <!-- 활동샵 섹션 -->
                        <div class="activity-section">
                            <h2 class="section-title">활동샵</h2>
                            <p class="section-desc">광고 제거, 우선 노출 등 편리한 기능들</p>
                            <div class="shop-grid" id="activityGrid">
                                <!-- JavaScript로 동적 생성 -->
                            </div>
                        </div>

                        <!-- 구인구직샵 섹션 -->
                        <div class="job-section">
                            <h2 class="section-title">구인구직샵</h2>
                            <p class="section-desc">구인구직 관련 프리미엄 서비스</p>
                            <div class="shop-grid" id="jobGrid">
                                <!-- JavaScript로 동적 생성 -->
                            </div>
                        </div>

                        <!-- 토큰샵 섹션 -->
                        <div class="token-section">
                            <h2 class="section-title">토큰샵</h2>
                            <p class="section-desc">AI 토큰, 전문가 배지 등 전문가를 위한 도구</p>
                            <div class="shop-grid" id="tokenGrid">
                                <!-- JavaScript로 동적 생성 -->
                            </div>
                        </div>

                        <!-- 빈 결과 메시지 -->
                        <div class="empty-results" id="emptyResults" style="display: none;">
                            <div class="empty-results-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <h3>상품을 찾을 수 없습니다</h3>
                            <p>다른 카테고리를 선택해보세요.</p>
                        </div>
                    </div>
                </main>
            </div>
        </div>


        <!-- 구매 확인 모달 -->
        <div class="purchase-modal" id="purchaseModal" style="display: none;">
            <div class="modal-backdrop" id="modalBackdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>구매 확인</h3>
                    <button class="modal-close" id="modalClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- JavaScript로 동적 생성 -->
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="modalCancel">취소</button>
                    <button class="btn btn-primary" id="modalConfirm">구매하기</button>
                </div>
            </div>
        </div>

        <!-- 장바구니 모달 -->
        <div class="cart-modal" id="cartModal" style="display: none;">
            <div class="modal-backdrop" onclick="toggleCartModal()"></div>
            <div class="cart-modal-content">
                <div class="cart-modal-header">
                    <h3>장바구니</h3>
                    <button class="modal-close" onclick="toggleCartModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="cart-modal-body" id="cartModalBody">
                    <!-- JavaScript로 동적 생성 -->
                </div>
                <div class="cart-modal-footer">
                    <div class="cart-total">
                        <span>총 결제금액: </span>
                        <strong id="cartTotalPrice">0P</strong>
                    </div>
                    <button class="btn btn-primary cart-purchase-btn" onclick="purchaseCart()">
                        전체 구매하기
                    </button>
                </div>
            </div>
        </div>

        <!-- 토스트 알림 -->
        <div class="toast" id="toast" style="display: none;">
            <div class="toast-content">
                <i class="toast-icon"></i>
                <span class="toast-message"></span>
            </div>
        </div>

        <!-- 하단 고정 선택바 -->
        <div class="bottom-selection-bar" id="bottomSelectionBar" style="display: none;">
            <div class="selection-bar-content">
                <!-- 축약 모드 -->
                <div class="selection-summary" id="selectionSummary">
                    <div class="selection-info">
                        <span class="selected-count">0개 선택</span>
                        <span class="total-price">0P</span>
                    </div>
                    <button class="expand-btn" onclick="toggleSelectionDetails()" id="expandBtn">
                        <i class="fas fa-chevron-up"></i>
                    </button>
                </div>

                <!-- 상세 모드 -->
                <div class="selection-details" id="selectionDetails" style="display: none;">
                    <div class="selection-header">
                        <h3>선택한 상품</h3>
                        <button class="collapse-btn" onclick="toggleSelectionDetails()">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                    
                    <div class="selected-items-list" id="selectedItemsList">
                        <!-- JavaScript로 동적 생성 -->
                    </div>
                    
                    <div class="selection-footer">
                        <div class="total-info">
                            <span class="total-label">총 결제금액</span>
                            <span class="total-amount" id="totalAmount">0P</span>
                        </div>
                        <div class="action-buttons">
                            <button class="clear-all-btn" onclick="clearAllSelections()">전체삭제</button>
                            <button class="purchase-all-btn" onclick="purchaseSelectedItems()">구매하기</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="script.js?v=3"></script>
        <script src="points-shop.js"></script>
        
        <!-- Supabase 통합 -->
        <script src="js/config/supabase.js"></script>
        <script src="js/services/authService.js"></script>
        <script src="js/pages/pointsShopSupabase.js"></script>
        <!-- ES6 모듈 메인 스크립트 -->
    <script type="module" src="js/main.js"></script>
    
</body>
</html>
