<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta
        http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; font-src 'self' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; img-src 'self' data: https:; connect-src 'self' https://sishloxzcqapontycuyz.supabase.co wss://sishloxzcqapontycuyz.supabase.co;"
    />
    <title>자유게시판 - WAVE SPACE</title>
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script src="preload.js"></script>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="styles.css?v=7">
    <link rel="stylesheet" href="forum.css">
    <link rel="stylesheet" href="css/checkbox-interaction.css">
    <link rel="stylesheet" href="mobile-fix.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 전체 컨테이너 -->
    <div class="app-container">
        <!-- 사이드바 (index.html과 동일) -->
        <aside class="sidebar">
            <!-- 로고 영역 -->
            <div class="sidebar-header">
                <a href="index.html" class="logo-container">
                    <span class="logo-text">WAVE space</span>
                    <span class="beta-badge">BETA</span>
                </a>
            </div>

            <!-- 슬로건 -->
            <div class="sidebar-slogan">
                <p>대한민국 No.1 분양실무자 대표 커뮤니티</p>
            </div>

            <!-- 네비게이션 -->
            <nav class="sidebar-nav">
                <!-- 안내 섹션 -->
                <div class="nav-section">
                    <div class="nav-category">
                        <div class="nav-category-wrapper">
                            <button class="nav-category-button">
                                <i class="fas fa-book-open"></i>
                                <span>안내</span>
                                <i class="fas fa-chevron-down nav-arrow"></i>
                            </button>
                            <div class="nav-items">
                                <a href="notice.html" class="nav-item">
                                    <i class="fas fa-bullhorn"></i>
                                    <span>공지사항</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="updates.html" class="nav-item">
                                    <i class="fas fa-info-circle"></i>
                                    <span>업데이트</span>
                                </a>
                                <a href="support.html" class="nav-item">
                                    <i class="fas fa-life-ring"></i>
                                    <span>고객센터</span>
                                </a>
                                <a href="plus-membership.html" class="nav-item">
                                    <i class="fas fa-rocket"></i>
                                    <span>+Plus Membership</span>
                                </a>
                                <a href="events.html" class="nav-item">
                                    <i class="fas fa-gift"></i>
                                    <span>이벤트</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 커뮤니티 섹션 -->
                <div class="nav-section">
                    <div class="nav-category active">
                        <div class="nav-category-wrapper">
                            <button class="nav-category-button">
                                <i class="fas fa-users"></i>
                                <span>커뮤니티</span>
                                <i class="fas fa-chevron-down nav-arrow"></i>
                            </button>
                            <div class="nav-items">
                                <a href="hall-of-fame.html" class="nav-item hall-of-fame highlighted">
                                    <i class="fas fa-trophy"></i>
                                    <span>명예의전당</span>
                                </a>
                                <a href="attendance.html" class="nav-item">
                                    <i class="fas fa-calendar-check"></i>
                                    <span>출석체크</span>
                                </a>
                                <a href="forum.html" class="nav-item active">
                                    <i class="fas fa-comments"></i>
                                    <span>자유게시판</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="humor.html" class="nav-item">
                                    <i class="fas fa-laugh"></i>
                                    <span>유머재미</span>
                                </a>
                                <a href="qna.html" class="nav-item">
                                    <i class="fas fa-question-circle"></i>
                                    <span>질문답변</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 구인구직 섹션 -->
                <div class="nav-section">
                    <div class="nav-category">
                        <div class="nav-category-wrapper">
                            <button class="nav-category-button">
                                <i class="fas fa-building"></i>
                                <span>구인구직</span>
                                <i class="fas fa-chevron-down nav-arrow"></i>
                            </button>
                            <div class="nav-items">
                                <a href="planning-recruitment.html" class="nav-item">
                                    <i class="fas fa-project-diagram"></i>
                                    <span>분양기획</span>
                                </a>
                                <a href="sales-recruit.html" class="nav-item highlighted">
                                    <i class="fas fa-briefcase"></i>
                                    <span>분양영업</span>
                                </a>
                                <a href="ai-matching.html" class="nav-item">
                                    <i class="fas fa-robot"></i>
                                    <span>AI 매칭 서비스</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 분양자료 섹션 -->
                <div class="nav-section">
                    <div class="nav-category">
                        <div class="nav-category-wrapper">
                            <button class="nav-category-button">
                                <i class="fas fa-folder-open"></i>
                                <span>분양자료</span>
                                <i class="fas fa-chevron-down nav-arrow"></i>
                            </button>
                            <div class="nav-items">
                                <a href="data-center.html" class="nav-item highlighted">
                                    <i class="fas fa-database"></i>
                                    <span>Data Center</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="market-research.html" class="nav-item">
                                    <i class="fas fa-chart-line"></i>
                                    <span>시장조사서</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="proposal.html" class="nav-item">
                                    <i class="fas fa-file-alt"></i>
                                    <span>제안서</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="education.html" class="nav-item">
                                    <i class="fas fa-graduation-cap"></i>
                                    <span>교육자료</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="policy.html" class="nav-item">
                                    <i class="fas fa-gavel"></i>
                                    <span>정책자료</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="other-docs.html" class="nav-item">
                                    <i class="fas fa-archive"></i>
                                    <span>기타자료</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="ai-report.html" class="nav-item">
                                    <i class="fas fa-robot"></i>
                                    <span>AI 보고서</span>
                                    <span class="check-mark"></span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 포인트 섹션 -->
                <div class="nav-section">
                    <div class="nav-category">
                        <div class="nav-category-wrapper">
                            <button class="nav-category-button">
                                <i class="fas fa-coins"></i>
                                <span>포인트</span>
                                <i class="fas fa-chevron-down nav-arrow"></i>
                            </button>
                            <div class="nav-items">
                                <a href="points-policy.html" class="nav-item highlighted">
                                    <i class="fas fa-gem"></i>
                                    <span>포인트정책</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="#" class="nav-item">
                                    <i class="fas fa-chart-bar"></i>
                                    <span>전체랭킹</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="#" class="nav-item">
                                    <i class="fas fa-credit-card"></i>
                                    <span>충전하기</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="points-shop.html" class="nav-item">
                                    <i class="fas fa-store"></i>
                                    <span>상점</span>
                                    <span class="check-mark"></span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 미니게임 섹션 -->
                <div class="minigame-section">
                    <div class="minigame-header">
                        <i class="fas fa-gamepad"></i>
                        <span>미니게임</span>
                    </div>
                    <div class="minigame-buttons">
                        <a href="#" class="minigame-btn">
                            <i class="fas fa-gamepad"></i>
                            <span>모든 게임</span>
                        </a>
                        <a href="#" class="minigame-btn">
                            <i class="fas fa-circle-notch"></i>
                            <span>룰렛</span>
                        </a>
                        <a href="#" class="minigame-btn">
                            <i class="fas fa-layer-group"></i>
                            <span>블랙잭</span>
                        </a>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- 메인 컨테이너 -->
        <div class="main-container">
            <!-- 헤더 (동적 로드) -->
            <div id="header-container">
                <!-- HeaderLoader가 동적으로 헤더를 여기에 로드합니다 -->
            </div>

            <!-- 메인 콘텐츠 -->
            <main class="main-content">
                <div class="forum-container">
                    <!-- 헤더 -->
                    <div class="forum-header">
                        <div class="forum-header-left">
                            <h1 class="forum-title">자유게시판</h1>
                            <p class="forum-subtitle">자유롭게 소통하는 분양실무자들의 공간</p>
                        </div>
                    </div>

                    <!-- 인기 게시글 -->
                    <div class="hot-posts">
                        <div class="section-header">
                            <i class="fas fa-fire hot-icon"></i>
                            <h2 class="section-title">인기 게시글</h2>
                        </div>
                    <div class="hot-posts-grid">
                        <div class="hot-post-card">
                            <span class="hot-badge">HOT</span>
                            <h3 class="hot-post-title">2024년 하반기 분양시장 전망과 대응 전략</h3>
                            <p class="hot-post-excerpt">최근 금리 인상과 규제 변화로 인한 분양시장의 변화에 대해 현업에서 느끼는 체감도와 대응 방안을 공유합니다...</p>
                            <div class="hot-post-stats">
                                <span><i class="fas fa-comment"></i> 45</span>
                                <span><i class="fas fa-heart"></i> 89</span>
                            </div>
                        </div>
                        <div class="hot-post-card">
                            <span class="hot-badge">HOT</span>
                            <h3 class="hot-post-title">성공적인 모델하우스 운영 노하우 대공개</h3>
                            <p class="hot-post-excerpt">10년차 분양영업 전문가가 알려주는 모델하우스 운영의 모든 것. 고객 응대부터 계약까지...</p>
                            <div class="hot-post-stats">
                                <span><i class="fas fa-comment"></i> 32</span>
                                <span><i class="fas fa-heart"></i> 76</span>
                            </div>
                        </div>
                        <div class="hot-post-card">
                            <span class="hot-badge">HOT</span>
                            <h3 class="hot-post-title">분양가 상한제 지역 영업 전략 총정리</h3>
                            <p class="hot-post-excerpt">분양가 상한제 적용 지역에서의 효과적인 영업 전략과 실제 사례를 바탕으로 한 팁...</p>
                            <div class="hot-post-stats">
                                <span><i class="fas fa-comment"></i> 28</span>
                                <span><i class="fas fa-heart"></i> 65</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 인기 게시글 토글 버튼 -->
                <button class="hot-posts-toggle" id="hotPostsToggle">
                    <i class="fas fa-chevron-down"></i>
                    <span>인기 게시글 보기</span>
                </button>

                <!-- 필터 및 검색 영역 -->
                <div class="forum-filter-section">
                    <!-- 카테고리 탭 -->
                    <div class="checkbox-tabs category-tabs">
                        <label class="checkbox-tab active" data-category="all">
                            <input type="radio" name="forum-category" checked>
                            <span class="tab-check"></span>
                            <span>전체</span>
                            <span class="tab-count">1,234</span>
                        </label>
                        <label class="checkbox-tab" data-category="general">
                            <input type="radio" name="forum-category">
                            <span class="tab-check"></span>
                            <span>일반</span>
                            <span class="tab-count">523</span>
                        </label>
                        <label class="checkbox-tab" data-category="question">
                            <input type="radio" name="forum-category">
                            <span class="tab-check"></span>
                            <span>질문</span>
                            <span class="tab-count">312</span>
                        </label>
                        <label class="checkbox-tab" data-category="info">
                            <input type="radio" name="forum-category">
                            <span class="tab-check"></span>
                            <span>정보공유</span>
                            <span class="tab-count">245</span>
                        </label>
                        <label class="checkbox-tab" data-category="review">
                            <input type="radio" name="forum-category">
                            <span class="tab-check"></span>
                            <span>후기</span>
                            <span class="tab-count">98</span>
                        </label>
                    </div>
                    
                    <!-- 검색 및 정렬 행 -->
                    <div class="search-sort-row">
                        <!-- 검색창 -->
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="제목, 내용, 작성자로 검색" id="searchInput">
                        </div>
                        
                        <!-- 정렬 필터 -->
                        <div class="sort-tabs">
                            <button class="sort-tab active" data-sort="latest">
                                최신순
                            </button>
                            <button class="sort-tab" data-sort="views">
                                조회순
                            </button>
                            <button class="sort-tab" data-sort="comments">
                                댓글순
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 게시글 목록 및 사이드바 -->
                <div class="posts-section">
                    <!-- 게시글 목록 -->
                    <div class="posts-list">
                        <!-- 공지사항 -->
                        <div class="notice-item">
                            <div class="notice-badge-wrapper">
                                <span class="notice-badge">공지</span>
                            </div>
                            <div class="notice-content">
                                <h3 class="notice-title">
                                    <a href="#">[필독] 자유게시판 이용 규칙 및 가이드라인</a>
                                    <i class="fas fa-thumbtack"></i>
                                </h3>
                            </div>
                        </div>

                        <!-- 일반 게시글 -->
                        <div class="post-item">
                            <div class="post-number">1234</div>
                            <div class="post-category">
                                <span class="category-badge question">질문</span>
                            </div>
                            <div class="post-content">
                                <h3 class="post-title">
                                    <a href="#">청약통장 가점 계산 관련 질문드립니다</a>
                                    <span class="new-badge">NEW</span>
                                </h3>
                                <div class="post-meta">
                                    <span><i class="fas fa-user-circle"></i> 김영업</span>
                                    <span><i class="fas fa-clock"></i> 10분 전</span>
                                    <span><i class="fas fa-eye"></i> 23</span>
                                </div>
                            </div>
                            <div class="post-stats">
                                <span class="like-count"><i class="fas fa-heart"></i> 2</span>
                                <span class="comment-count"><i class="fas fa-comment"></i> 5</span>
                            </div>
                        </div>

                        <div class="post-item">
                            <div class="post-number">1233</div>
                            <div class="post-category">
                                <span class="category-badge info">정보공유</span>
                            </div>
                            <div class="post-content">
                                <h3 class="post-title">
                                    <a href="#">서울 강남권 신규 분양 일정 총정리 (2024년 1분기)</a>
                                    <span class="new-badge">NEW</span>
                                </h3>
                                <div class="post-meta">
                                    <span><i class="fas fa-user-circle"></i> 박기획</span>
                                    <span><i class="fas fa-clock"></i> 30분 전</span>
                                    <span><i class="fas fa-eye"></i> 156</span>
                                </div>
                            </div>
                            <div class="post-stats">
                                <span class="like-count"><i class="fas fa-heart"></i> 12</span>
                                <span class="comment-count"><i class="fas fa-comment"></i> 8</span>
                            </div>
                        </div>

                        <div class="post-item">
                            <div class="post-number">1232</div>
                            <div class="post-category">
                                <span class="category-badge review">후기</span>
                            </div>
                            <div class="post-content">
                                <h3 class="post-title">
                                    <a href="#">힐스테이트 ○○ 분양 현장 후기 및 경쟁률 예상</a>
                                </h3>
                                <div class="post-meta">
                                    <span><i class="fas fa-user-circle"></i> 이팀장</span>
                                    <span><i class="fas fa-clock"></i> 1시간 전</span>
                                    <span><i class="fas fa-eye"></i> 342</span>
                                </div>
                            </div>
                            <div class="post-stats">
                                <span class="like-count"><i class="fas fa-heart"></i> 23</span>
                                <span class="comment-count"><i class="fas fa-comment"></i> 15</span>
                            </div>
                        </div>

                        <div class="post-item">
                            <div class="post-number">1231</div>
                            <div class="post-category">
                                <span class="category-badge general">일반</span>
                            </div>
                            <div class="post-content">
                                <h3 class="post-title">
                                    <a href="#">분양영업 10년차가 말하는 이 업계의 현실</a>
                                </h3>
                                <div class="post-meta">
                                    <span><i class="fas fa-user-circle"></i> 최전문가</span>
                                    <span><i class="fas fa-clock"></i> 2시간 전</span>
                                    <span><i class="fas fa-eye"></i> 567</span>
                                </div>
                            </div>
                            <div class="post-stats">
                                <span class="like-count"><i class="fas fa-heart"></i> 45</span>
                                <span class="comment-count"><i class="fas fa-comment"></i> 32</span>
                            </div>
                        </div>


                        <div class="post-item">
                            <div class="post-number">1229</div>
                            <div class="post-category">
                                <span class="category-badge info">정보공유</span>
                            </div>
                            <div class="post-content">
                                <h3 class="post-title">
                                    <a href="#">2024년 달라지는 부동산 정책 총정리</a>
                                </h3>
                                <div class="post-meta">
                                    <span><i class="fas fa-user-circle"></i> 정책분석가</span>
                                    <span><i class="fas fa-clock"></i> 5시간 전</span>
                                    <span><i class="fas fa-eye"></i> 892</span>
                                </div>
                            </div>
                            <div class="post-stats">
                                <span class="like-count"><i class="fas fa-heart"></i> 67</span>
                                <span class="comment-count"><i class="fas fa-comment"></i> 23</span>
                            </div>
                        </div>

                        <div class="post-item">
                            <div class="post-number">1228</div>
                            <div class="post-category">
                                <span class="category-badge question">질문</span>
                            </div>
                            <div class="post-content">
                                <h3 class="post-title">
                                    <a href="#">전매제한 관련 법률 해석 도움 부탁드립니다</a>
                                </h3>
                                <div class="post-meta">
                                    <span><i class="fas fa-user-circle"></i> 신입사원</span>
                                    <span><i class="fas fa-clock"></i> 8시간 전</span>
                                    <span><i class="fas fa-eye"></i> 145</span>
                                </div>
                            </div>
                            <div class="post-stats">
                                <span class="like-count"><i class="fas fa-heart"></i> 3</span>
                                <span class="comment-count"><i class="fas fa-comment"></i> 12</span>
                            </div>
                        </div>

                        <div class="post-item">
                            <div class="post-number">1227</div>
                            <div class="post-category">
                                <span class="category-badge general">일반</span>
                            </div>
                            <div class="post-content">
                                <h3 class="post-title">
                                    <a href="#">모델하우스 운영 중 겪은 황당한 에피소드</a>
                                </h3>
                                <div class="post-meta">
                                    <span><i class="fas fa-user-circle"></i> 웃긴이야기</span>
                                    <span><i class="fas fa-clock"></i> 어제</span>
                                    <span><i class="fas fa-eye"></i> 1,234</span>
                                </div>
                            </div>
                            <div class="post-stats">
                                <span class="like-count"><i class="fas fa-heart"></i> 89</span>
                                <span class="comment-count"><i class="fas fa-comment"></i> 45</span>
                            </div>
                        </div>

                        <div class="post-item">
                            <div class="post-number">1226</div>
                            <div class="post-category">
                                <span class="category-badge review">후기</span>
                            </div>
                            <div class="post-content">
                                <h3 class="post-title">
                                    <a href="#">래미안 ○○ 청약 당첨 후기 및 팁 공유</a>
                                </h3>
                                <div class="post-meta">
                                    <span><i class="fas fa-user-circle"></i> 당첨자</span>
                                    <span><i class="fas fa-clock"></i> 어제</span>
                                    <span><i class="fas fa-eye"></i> 2,345</span>
                                </div>
                            </div>
                            <div class="post-stats">
                                <span class="like-count"><i class="fas fa-heart"></i> 123</span>
                                <span class="comment-count"><i class="fas fa-comment"></i> 67</span>
                            </div>
                        </div>
                    </div>

                    <!-- 사이드 위젯 -->
                    <div class="side-widgets">
                        <!-- 인기 키워드 -->
                        <div class="widget">
                            <h3 class="widget-title">
                                <i class="fas fa-hashtag"></i>
                                인기 키워드
                            </h3>
                            <div class="keyword-list">
                                <div class="keyword-item">
                                    <span class="rank">1</span>
                                    <span class="keyword">분양가상한제</span>
                                    <span class="trend up">▲</span>
                                </div>
                                <div class="keyword-item">
                                    <span class="rank">2</span>
                                    <span class="keyword">청약통장</span>
                                    <span class="trend same">-</span>
                                </div>
                                <div class="keyword-item">
                                    <span class="rank">3</span>
                                    <span class="keyword">모델하우스</span>
                                    <span class="trend up">▲</span>
                                </div>
                                <div class="keyword-item">
                                    <span class="rank">4</span>
                                    <span class="keyword">전매제한</span>
                                    <span class="trend down">▼</span>
                                </div>
                                <div class="keyword-item">
                                    <span class="rank">5</span>
                                    <span class="keyword">특별공급</span>
                                    <span class="trend up">▲</span>
                                </div>
                            </div>
                        </div>

                        <!-- 베스트 댓글 -->
                        <div class="widget">
                            <h3 class="widget-title">
                                <i class="fas fa-star"></i>
                                베스트 댓글
                            </h3>
                            <div class="best-comments">
                                <div class="comment-item">
                                    <p class="comment-text">"10년 경력자로서 정말 공감되는 내용이네요. 특히 고객 응대 부분은 신입분들 꼭 참고하세요!"</p>
                                    <div class="comment-meta">
                                        <span class="comment-author">김전문가</span>
                                        <span class="comment-likes"><i class="fas fa-heart"></i> 45</span>
                                    </div>
                                </div>
                                <div class="comment-item">
                                    <p class="comment-text">"청약 가점 계산 관련해서는 국토부 홈페이지에서 시뮬레이션 가능합니다~"</p>
                                    <div class="comment-meta">
                                        <span class="comment-author">도움이</span>
                                        <span class="comment-likes"><i class="fas fa-heart"></i> 32</span>
                                    </div>
                                </div>
                                <div class="comment-item">
                                    <p class="comment-text">"요즘 시장 상황이 정말 어렵긴 하지만 기회는 항상 있습니다. 화이팅!"</p>
                                    <div class="comment-meta">
                                        <span class="comment-author">긍정맨</span>
                                        <span class="comment-likes"><i class="fas fa-heart"></i> 28</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 페이지네이션 -->
                <div class="pagination-underline" id="forumPagination">
                    <!-- JavaScript로 동적 생성 -->
                </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 플로팅 글쓰기 버튼 -->
    <div class="write-btn-wrapper">
        <div class="write-label">글쓰기</div>
        <svg class="write-curve" width="60" height="80" viewBox="0 0 60 80">
            <path d="M 30 10 Q 20 25, 25 35 T 35 50 Q 30 65, 30 75" 
                  stroke="rgba(46, 140, 230, 0.3)" 
                  stroke-width="2" 
                  fill="none"
                  stroke-linecap="round"
                  stroke-dasharray="4, 6">
                <animate attributeName="stroke-dashoffset" 
                         values="0;10" 
                         dur="3s" 
                         repeatCount="indefinite"/>
            </path>
        </svg>
        <button class="write-btn" title="글쓰기">
            <i class="fas fa-pen"></i>
        </button>
    </div>

    <!-- 글쓰기 모달 -->
    <div class="write-modal" id="writeModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">게시글 작성</h2>
                <button class="modal-close" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form class="write-form" id="writeForm">
                    <!-- 카테고리 선택 -->
                    <div class="form-group">
                        <label for="postCategory">카테고리 <span class="required">*</span></label>
                        <select id="postCategory" name="category" required>
                            <option value="">카테고리를 선택하세요</option>
                            <option value="general">일반</option>
                            <option value="question">질문</option>
                            <option value="info">정보공유</option>
                            <option value="review">후기</option>
                        </select>
                    </div>

                    <!-- 제목 입력 -->
                    <div class="form-group">
                        <label for="postTitle">제목 <span class="required">*</span></label>
                        <input type="text" id="postTitle" name="title" placeholder="제목을 입력하세요" maxlength="100" required>
                        <span class="char-count"><span id="titleCount">0</span>/100</span>
                    </div>

                    <!-- 내용 입력 -->
                    <div class="form-group">
                        <label for="postContent">내용 <span class="required">*</span></label>
                        <div class="editor-toolbar">
                            <button type="button" class="toolbar-btn" data-command="bold" title="굵게">
                                <i class="fas fa-bold"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="italic" title="기울임">
                                <i class="fas fa-italic"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="underline" title="밑줄">
                                <i class="fas fa-underline"></i>
                            </button>
                            <div class="toolbar-separator"></div>
                            <button type="button" class="toolbar-btn" data-command="link" title="링크">
                                <i class="fas fa-link"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="image" title="이미지">
                                <i class="fas fa-image"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="code" title="코드">
                                <i class="fas fa-code"></i>
                            </button>
                        </div>
                        <textarea id="postContent" name="content" placeholder="내용을 입력하세요" rows="12" required></textarea>
                        <span class="char-count"><span id="contentCount">0</span>/5000</span>
                    </div>

                    <!-- 파일 첨부 -->
                    <div class="form-group">
                        <label for="postFiles">파일 첨부</label>
                        <div class="file-upload-area">
                            <input type="file" id="postFiles" name="files" multiple accept=".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.xls,.xlsx" hidden>
                            <label for="postFiles" class="file-upload-label">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <span>클릭하여 파일을 선택하거나 여기에 드래그하세요</span>
                                <span class="file-info">최대 10MB, jpg/png/gif/pdf/doc/xls 지원</span>
                            </label>
                            <div class="file-list" id="fileList"></div>
                        </div>
                    </div>

                    <!-- 옵션 설정 -->
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" name="anonymous">
                            <span>익명으로 작성</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="allowComments" checked>
                            <span>댓글 허용</span>
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-cancel" id="cancelWrite">취소</button>
                <button type="button" class="btn-preview" id="previewPost">
                    <i class="fas fa-eye"></i> 미리보기
                </button>
                <button type="submit" class="btn-submit" form="writeForm">
                    <i class="fas fa-check"></i> 작성 완료
                </button>
            </div>
        </div>
    </div>

    <script src="script.js?v=3"></script>
    <!-- Supabase 통합 -->
    <script src="js/config/supabase.js"></script>
    <script src="js/services/authService.js"></script>
    <script src="js/modules/auth-guard.js"></script>
    <script src="js/services/postService.js"></script>
    <script src="js/pages/forumSupabase.js"></script>
    <script>
        // 글쓰기 버튼 클릭 시 로그인 체크
        document.addEventListener('DOMContentLoaded', function() {
            const writeBtn = document.querySelector('.write-btn');
            const writeModal = document.getElementById('writeModal');
            
            if (writeBtn) {
                writeBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // 로그인 상태 확인
                    const isLoggedIn = window.authGuard && window.authGuard.isLoggedIn();
                    
                    if (!isLoggedIn) {
                        // 로그인되지 않은 경우 로그인 페이지로 이동
                        if (window.showToast) {
                            window.showToast('글쓰기 기능 이용을 위해 로그인이 필요합니다.', 'warning');
                        } else {
                            alert('글쓰기 기능 이용을 위해 로그인이 필요합니다.');
                        }
                        
                        setTimeout(() => {
                            const currentUrl = encodeURIComponent(window.location.href);
                            window.location.href = `login.html?redirect=${currentUrl}`;
                        }, 1000);
                        return;
                    }
                    
                    // 로그인된 경우 글쓰기 모달 표시
                    if (writeModal) {
                        writeModal.style.display = 'flex';
                        document.body.style.overflow = 'hidden';
                    }
                });
            }
            
            // 모달 닫기 기능
            const closeModal = document.getElementById('closeModal');
            const cancelWrite = document.getElementById('cancelWrite');
            const modalOverlay = document.querySelector('.modal-overlay');
            
            function closeWriteModal() {
                if (writeModal) {
                    writeModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            }
            
            if (closeModal) {
                closeModal.addEventListener('click', closeWriteModal);
            }
            
            if (cancelWrite) {
                cancelWrite.addEventListener('click', closeWriteModal);
            }
            
            if (modalOverlay) {
                modalOverlay.addEventListener('click', closeWriteModal);
            }
        });
    </script>
    <!-- ES6 모듈 메인 스크립트 -->
    <script type="module" src="js/main.js"></script>
    
</body>
</html>