<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶œì„ì²´í¬ ë””ë²„ê·¸</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="attendance.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            padding: 40px;
            background: #f5f5f5;
        }
        .debug-info {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 2px solid #0066ff;
        }
        .debug-info h2 {
            color: #0066ff;
            margin-top: 0;
        }
        .console-output {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="debug-info">
        <h2>ğŸ” ì¶œì„ ëª…ë‹¨ ë””ë²„ê·¸ í˜ì´ì§€</h2>
        <button onclick="testRender()">ë Œë”ë§ í…ŒìŠ¤íŠ¸</button>
        <button onclick="clearConsole()">ì½˜ì†” í´ë¦¬ì–´</button>
        <div class="console-output" id="consoleOutput"></div>
    </div>
    
    <!-- ì˜¤ëŠ˜ì˜ ì¶œì„ í˜„í™© ì„¹ì…˜ -->
    <div class="today-attendance">
        <h2 class="section-title">
            <i class="fas fa-users"></i>
            ì˜¤ëŠ˜ì˜ ì¶œì„ í˜„í™© (ìƒìœ„ 30ëª…)
        </h2>
        <div class="attendance-list" id="attendanceList">
            <!-- JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <script>
        // ì½˜ì†” ì¶œë ¥ ìº¡ì²˜
        const consoleOutput = document.getElementById('consoleOutput');
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : arg
            ).join(' ');
            consoleOutput.innerHTML += `<div style="color: #0f0">[LOG] ${message}</div>`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : arg
            ).join(' ');
            consoleOutput.innerHTML += `<div style="color: #f00">[ERROR] ${message}</div>`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };
        
        function clearConsole() {
            consoleOutput.innerHTML = '';
        }
        
        // í…ŒìŠ¤íŠ¸ ë°ì´í„°
        const attendanceData = [
            { rank: 1, name: 'ê¹€ì˜ì—…ì™•', userId: 'kimyoung', time: '07:58', message: 'ì˜¤ëŠ˜ë„ ì²« ì¶œì„! ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”!', streak: 25, badge: 'ì†Œí†µì™•', isCouponWinner: false },
            { rank: 2, name: 'ì´ê¸°íšì‹ ', userId: 'leeplan', time: '08:03', message: 'ì¼ì° ì¼ì–´ë‚˜ëŠ” ìƒˆê°€ ë²Œë ˆë¥¼ ì¡ëŠ”ë‹¤!', streak: 18, badge: 'ì—´ì •ë§¨', isCouponWinner: true },
            { rank: 3, name: 'ë°•íŒ€ì¥ë‹˜', userId: 'parkteam', time: '08:12', message: 'ì˜¤ëŠ˜ë„ íŒ€ì›ë“¤ê³¼ í•¨ê»˜ í™”ì´íŒ…!', streak: 31, badge: 'ë² í…Œë‘', isCouponWinner: false },
            { rank: 4, name: 'ìµœì „ë¬¸ê°€', userId: 'choiexpert', time: '08:18', message: 'ì „ë¬¸ì„±ìœ¼ë¡œ ë¬´ì¥í•œ í•˜ë£¨ ì‹œì‘!', streak: 12, badge: 'ì „ë¬¸ê°€', isCouponWinner: false },
            { rank: 5, name: 'ì •ë¶„ì–‘ìŠ¤íƒ€', userId: 'jungstar', time: '08:25', message: 'ë¶„ì–‘ì˜ ë‹¬ì¸ì´ ì¶œì„í–ˆìŠµë‹ˆë‹¤', streak: 22, badge: 'ìŠ¤íƒ€', isCouponWinner: false }
        ];
        
        const currentUser = {
            name: 'ë°•ìŠ¹í•™',
            userId: 'parksh',
            rank: 25,
            isCheckedIn: false,
            streak: 7,
            badge: 'ì´ˆë³´ì'
        };
        
        function testRender() {
            console.log('=== ë Œë”ë§ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            const attendanceList = document.getElementById('attendanceList');
            if (!attendanceList) {
                console.error('âŒ attendanceList ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            console.log('âœ… attendanceList ìš”ì†Œ ë°œê²¬');
            console.log('ğŸ“Š ë°ì´í„° ê°œìˆ˜:', attendanceData.length);
            
            let htmlContent = '';
            
            attendanceData.forEach((user, index) => {
                const isMyRank = user.name === currentUser.name;
                const rankClass = user.rank <= 3 ? `top-three rank-${user.rank}` : '';
                
                // ë©”ë‹¬ ì•„ì´ì½˜ ì„¤ì •
                let medalIcon = '';
                if (user.rank === 1) {
                    medalIcon = '<i class="fas fa-medal medal-gold"></i>';
                } else if (user.rank === 2) {
                    medalIcon = '<i class="fas fa-medal medal-silver"></i>';
                } else if (user.rank === 3) {
                    medalIcon = '<i class="fas fa-medal medal-bronze"></i>';
                }
                
                // ë“±ìˆ˜ë³„ í¬ì¸íŠ¸
                let points = 300;
                if (user.rank >= 1 && user.rank <= 3) {
                    points = 1000;
                } else if (user.rank >= 4 && user.rank <= 10) {
                    points = 800;
                } else if (user.rank >= 11 && user.rank <= 30) {
                    points = 500;
                }
                
                htmlContent += `
                    <div class="attendance-item ${isMyRank ? 'my-rank' : ''}">
                        <div class="rank-wrapper">
                            ${medalIcon}
                            <span class="rank-number ${rankClass}">${user.rank}ë“±</span>
                        </div>
                        <div class="check-time">${user.time}</div>
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-name-wrapper">
                            <span class="user-id">${user.userId}</span>
                            <span class="user-badge">${user.badge}</span>
                        </div>
                        <div class="user-message">${user.message}</div>
                        ${user.isCouponWinner ? '<div class="coupon-winner"><i class="fas fa-ticket-alt"></i> ì¿ í° ë‹¹ì²¨!</div>' : ''}
                        <div class="points-badge">+${points}P</div>
                    </div>
                `;
            });
            
            console.log('ğŸ“ HTML ìƒì„± ì™„ë£Œ, ê¸¸ì´:', htmlContent.length);
            
            attendanceList.innerHTML = htmlContent;
            
            console.log('âœ… ë Œë”ë§ ì™„ë£Œ!');
            console.log('ğŸ“¦ ë Œë”ë§ëœ ìš”ì†Œ ê°œìˆ˜:', attendanceList.children.length);
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            setTimeout(testRender, 100);
        });
    </script>
</body>
</html>