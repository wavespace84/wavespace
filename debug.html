<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>디버그 페이지 - WAVE space</title>
    <style>
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .status {
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
            margin: 5px 0;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .status.warning {
            background: #fff3cd;
            color: #856404;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>WAVE space 디버그 페이지</h1>
    
    <div class="test-section">
        <div class="test-title">CSS 변수 테스트</div>
        <div id="css-test"></div>
    </div>
    
    <div class="test-section">
        <div class="test-title">JavaScript 모듈 테스트</div>
        <div id="js-test"></div>
    </div>
    
    <div class="test-section">
        <div class="test-title">LocalStorage 테스트</div>
        <div id="storage-test"></div>
    </div>
    
    <div class="test-section">
        <div class="test-title">레이아웃 테스트</div>
        <div id="layout-test"></div>
    </div>

    <script>
        // CSS 변수 테스트
        function testCSSVariables() {
            const testEl = document.getElementById('css-test');
            const computedStyle = getComputedStyle(document.documentElement);
            
            const variables = [
                '--primary-blue',
                '--deep-blue',
                '--bright-blue',
                '--sky-blue',
                '--light-blue'
            ];
            
            let html = '';
            variables.forEach(varName => {
                const value = computedStyle.getPropertyValue(varName).trim();
                if (value) {
                    html += `<div class="status success">${varName}: ${value}</div>`;
                } else {
                    html += `<div class="status error">${varName}: 정의되지 않음</div>`;
                }
            });
            
            testEl.innerHTML = html;
        }
        
        // JavaScript 모듈 테스트
        async function testJSModules() {
            const testEl = document.getElementById('js-test');
            let html = '';
            
            try {
                // 모듈 로드 테스트
                const modules = [
                    'js/modules/sidebar.js',
                    'js/modules/header.js',
                    'js/modules/preload.js',
                    'js/modules/clock.js'
                ];
                
                for (const module of modules) {
                    try {
                        await import('./' + module);
                        html += `<div class="status success">${module} 로드 성공</div>`;
                    } catch (err) {
                        html += `<div class="status error">${module} 로드 실패: ${err.message}</div>`;
                    }
                }
            } catch (err) {
                html += `<div class="status error">모듈 시스템 오류: ${err.message}</div>`;
            }
            
            testEl.innerHTML = html;
        }
        
        // LocalStorage 테스트
        function testLocalStorage() {
            const testEl = document.getElementById('storage-test');
            let html = '';
            
            try {
                // 저장 테스트
                localStorage.setItem('wave-test', 'test-value');
                const value = localStorage.getItem('wave-test');
                
                if (value === 'test-value') {
                    html += '<div class="status success">LocalStorage 읽기/쓰기 성공</div>';
                } else {
                    html += '<div class="status error">LocalStorage 값 불일치</div>';
                }
                
                // 사이드바 상태 확인
                const sidebarState = localStorage.getItem('wave-active-category');
                if (sidebarState) {
                    html += `<div class="test-result">저장된 사이드바 상태: ${sidebarState}</div>`;
                } else {
                    html += '<div class="status warning">저장된 사이드바 상태 없음</div>';
                }
                
                // 정리
                localStorage.removeItem('wave-test');
            } catch (err) {
                html += `<div class="status error">LocalStorage 오류: ${err.message}</div>`;
            }
            
            testEl.innerHTML = html;
        }
        
        // 레이아웃 테스트
        function testLayout() {
            const testEl = document.getElementById('layout-test');
            let html = '';
            
            // 뷰포트 크기
            html += `<div class="test-result">뷰포트 크기: ${window.innerWidth}x${window.innerHeight}</div>`;
            
            // 스크롤바 여부
            const hasVerticalScroll = document.documentElement.scrollHeight > window.innerHeight;
            const hasHorizontalScroll = document.documentElement.scrollWidth > window.innerWidth;
            
            html += `<div class="status ${hasVerticalScroll ? 'warning' : 'success'}">세로 스크롤: ${hasVerticalScroll ? '있음' : '없음'}</div>`;
            html += `<div class="status ${hasHorizontalScroll ? 'error' : 'success'}">가로 스크롤: ${hasHorizontalScroll ? '있음' : '없음'}</div>`;
            
            testEl.innerHTML = html;
        }
        
        // 모든 테스트 실행
        window.addEventListener('DOMContentLoaded', () => {
            testCSSVariables();
            testJSModules();
            testLocalStorage();
            testLayout();
        });
    </script>
</body>
</html>