<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>출석체크 간단 테스트</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="attendance.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            padding: 40px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="test-section">
        <h2>1. 출석 버튼 테스트</h2>
        <button class="check-in-btn" id="checkInBtn">
            <i class="fas fa-stamp"></i>
            <span>출석체크 하기</span>
        </button>
        <input type="text" class="message-input" placeholder="오늘의 한마디를 남겨주세요! (미입력시 자동 멘트)" style="width: 100%; margin-top: 10px;">
    </div>

    <div class="test-section">
        <h2>2. 출석 현황 리스트</h2>
        <div class="attendance-list" id="attendanceList">
            <!-- 여기에 리스트가 표시됩니다 -->
        </div>
    </div>

    <script>
        // 랜덤 메시지 배열
        const randomMessages = [
            '오늘도 화이팅!',
            '과유 불가! 열심히 일해요!',
            '좋은 하루 되세요!'
        ];

        // 테스트 데이터
        const attendanceData = [
            { rank: 1, name: '김영업왕', userId: 'kimyoung', time: '07:58', message: '오늘도 첫 출석!', streak: 25, badge: '소통왕', isCouponWinner: false },
            { rank: 2, name: '이기획신', userId: 'leeplan', time: '08:03', message: '일찍 일어나는 새!', streak: 18, badge: '열정맨', isCouponWinner: true },
            { rank: 3, name: '박팀장님', userId: 'parkteam', time: '08:12', message: '팀원들과 화이팅!', streak: 31, badge: '베테랑', isCouponWinner: false }
        ];

        const currentUser = {
            name: '박승학',
            userId: 'parksh',
            rank: 25,
            badge: '초보자'
        };

        // 랜덤 메시지 선택
        function getRandomMessage() {
            return randomMessages[Math.floor(Math.random() * randomMessages.length)];
        }

        // 출석 버튼 클릭
        document.getElementById('checkInBtn').addEventListener('click', function() {
            console.log('출석 버튼 클릭!');
            const messageInput = document.querySelector('.message-input');
            let message = messageInput.value.trim();
            if (!message) {
                message = getRandomMessage();
                messageInput.value = message;
            }
            alert('출석 완료! 메시지: ' + message);
            this.disabled = true;
            this.innerHTML = '<i class="fas fa-check-circle"></i> <span>출석 완료</span>';
        });

        // 출석 리스트 렌더링
        function renderList() {
            console.log('리스트 렌더링 시작');
            const listElement = document.getElementById('attendanceList');
            
            let html = '';
            attendanceData.forEach(user => {
                const isMe = user.name === currentUser.name;
                const points = user.rank <= 3 ? 1000 : user.rank <= 10 ? 800 : user.rank <= 30 ? 500 : 300;
                
                html += `
                    <div class="attendance-item ${isMe ? 'my-rank' : ''}">
                        <div class="rank-wrapper">
                            ${user.rank <= 3 ? `<i class="fas fa-medal medal-${user.rank === 1 ? 'gold' : user.rank === 2 ? 'silver' : 'bronze'}"></i>` : ''}
                            <span class="rank-number">${user.rank}등</span>
                        </div>
                        <div class="check-time">${user.time}</div>
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-name-wrapper">
                            <span class="user-id">${user.userId}</span>
                            <span class="user-badge">${user.badge}</span>
                        </div>
                        <div class="user-message">${user.message}</div>
                        <div class="points-badge">+${points}P</div>
                    </div>
                `;
            });
            
            listElement.innerHTML = html;
            console.log('리스트 렌더링 완료! 아이템 수:', listElement.children.length);
        }

        // 페이지 로드 시 실행
        window.onload = function() {
            console.log('페이지 로드 완료');
            renderList();
        };
    </script>
</body>
</html>