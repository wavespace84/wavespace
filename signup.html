<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ÌöåÏõêÍ∞ÄÏûÖ - WAVE SPACE</title>
    
    <!-- ÌååÎπÑÏΩò -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- ÌôòÍ≤Ω ÏÑ§Ï†ï -->
    <script src="config.dev.js"></script>
    
    <!-- XSS Î≥¥Ìôò Î∞è ÏóêÎü¨ Ìï∏Îì§Îü¨ -->
    <script src="js/utils/xssProtection.js"></script>
    <script src="js/utils/errorHandler.js"></script>
    
    <script src="preload.js"></script>
    <link rel="stylesheet" href="common.css" />
    <link rel="stylesheet" href="styles.css?v=7" />
    <link rel="stylesheet" href="signup.css" />
    <link rel="stylesheet" href="mobile-fix.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body data-page="signup">
    <!-- Ï†ÑÏ≤¥ Ïª®ÌÖåÏù¥ÎÑà -->
    <div class="app-container">
        <!-- ÏÇ¨Ïù¥ÎìúÎ∞î -->
        <aside class="sidebar">
            <!-- Î°úÍ≥† ÏòÅÏó≠ -->
            <div class="sidebar-header">
                <a href="index.html" class="logo-container">
                    <span class="logo-text">WAVE space</span>
                    <span class="beta-badge">BETA</span>
                </a>
            </div>

            <!-- Ïä¨Î°úÍ±¥ -->
            <div class="sidebar-slogan">
                <p>ÎåÄÌïúÎØºÍµ≠ No.1 Î∂ÑÏñëÏã§Î¨¥Ïûê ÎåÄÌëú Ïª§ÎÆ§ÎãàÌã∞</p>
            </div>

            <!-- ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
            <nav class="sidebar-nav">
                <!-- ÏïàÎÇ¥ ÏÑπÏÖò -->
                <div class="nav-section">
                    <div class="nav-category">
                        <div class="nav-category-wrapper">
                            <button class="nav-category-button">
                                <i class="fas fa-book-open"></i>
                                <span>ÏïàÎÇ¥</span>
                                <i class="fas fa-chevron-down nav-arrow"></i>
                            </button>
                            <div class="nav-items">
                                <a href="notice.html" class="nav-item">
                                    <i class="fas fa-bullhorn"></i>
                                    <span>Í≥µÏßÄÏÇ¨Ìï≠</span>
                                </a>
                                <a href="updates.html" class="nav-item">
                                    <i class="fas fa-info-circle"></i>
                                    <span>ÏóÖÎç∞Ïù¥Ìä∏</span>
                                </a>
                                <a href="support.html" class="nav-item">
                                    <i class="fas fa-life-ring"></i>
                                    <span>Í≥†Í∞ùÏÑºÌÑ∞</span>
                                </a>
                                <a href="plus-membership.html" class="nav-item">
                                    <i class="fas fa-rocket"></i>
                                    <span>+Plus Membership</span>
                                </a>
                                <a href="events.html" class="nav-item">
                                    <i class="fas fa-gift"></i>
                                    <span>Ïù¥Î≤§Ìä∏</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ïª§ÎÆ§ÎãàÌã∞ ÏÑπÏÖò -->
                <div class="nav-section">
                    <div class="nav-category">
                        <div class="nav-category-wrapper">
                            <button class="nav-category-button">
                                <i class="fas fa-users"></i>
                                <span>Ïª§ÎÆ§ÎãàÌã∞</span>
                                <i class="fas fa-chevron-down nav-arrow"></i>
                            </button>
                            <div class="nav-items">
                                <a href="hall-of-fame.html" class="nav-item hall-of-fame highlighted">
                                    <i class="fas fa-trophy"></i>
                                    <span>Î™ÖÏòàÏùòÏ†ÑÎãπ</span>
                                </a>
                                <a href="attendance.html" class="nav-item">
                                    <i class="fas fa-calendar-check"></i>
                                    <span>Ï∂úÏÑùÏ≤¥ÌÅ¨</span>
                                </a>
                                <a href="forum.html" class="nav-item">
                                    <i class="fas fa-comments"></i>
                                    <span>ÏûêÏú†Í≤åÏãúÌåê</span>
                                </a>
                                <a href="humor.html" class="nav-item">
                                    <i class="fas fa-laugh"></i>
                                    <span>Ïú†Î®∏Ïû¨ÎØ∏</span>
                                </a>
                                <a href="qna.html" class="nav-item">
                                    <i class="fas fa-question-circle"></i>
                                    <span>ÏßàÎ¨∏ÎãµÎ≥Ä</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Íµ¨Ïù∏Íµ¨ÏßÅ ÏÑπÏÖò -->
                <div class="nav-section">
                    <div class="nav-category">
                        <div class="nav-category-wrapper">
                            <button class="nav-category-button">
                                <i class="fas fa-building"></i>
                                <span>Íµ¨Ïù∏Íµ¨ÏßÅ</span>
                                <i class="fas fa-chevron-down nav-arrow"></i>
                            </button>
                            <div class="nav-items">
                                <a href="planning-recruitment.html" class="nav-item">
                                    <i class="fas fa-project-diagram"></i>
                                    <span>Î∂ÑÏñëÍ∏∞Ìöç</span>
                                </a>
                                <a href="sales-recruit.html" class="nav-item highlighted">
                                    <i class="fas fa-briefcase"></i>
                                    <span>Î∂ÑÏñëÏòÅÏóÖ</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="ai-matching.html" class="nav-item">
                                    <i class="fas fa-robot"></i>
                                    <span>AI Îß§Ïπ≠</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Î∂ÑÏñëÏûêÎ£å ÏÑπÏÖò -->
                <div class="nav-section">
                    <div class="nav-category">
                        <div class="nav-category-wrapper">
                            <button class="nav-category-button">
                                <i class="fas fa-folder-open"></i>
                                <span>Î∂ÑÏñëÏûêÎ£å</span>
                                <i class="fas fa-chevron-down nav-arrow"></i>
                            </button>
                            <div class="nav-items">
                                <a href="data-center.html" class="nav-item highlighted">
                                    <i class="fas fa-database"></i>
                                    <span>Data Center</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="market-research.html" class="nav-item">
                                    <i class="fas fa-chart-line"></i>
                                    <span>ÏãúÏû•Ï°∞ÏÇ¨ÏÑú</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="proposal.html" class="nav-item">
                                    <i class="fas fa-file-alt"></i>
                                    <span>Ï†úÏïàÏÑú</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="education.html" class="nav-item">
                                    <i class="fas fa-graduation-cap"></i>
                                    <span>ÍµêÏú°ÏûêÎ£å</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="policy.html" class="nav-item">
                                    <i class="fas fa-gavel"></i>
                                    <span>Ï†ïÏ±ÖÏûêÎ£å</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="other-docs.html" class="nav-item">
                                    <i class="fas fa-archive"></i>
                                    <span>Í∏∞ÌÉÄÏûêÎ£å</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="ai-report.html" class="nav-item">
                                    <i class="fas fa-robot"></i>
                                    <span>AI Î≥¥Í≥†ÏÑú</span>
                                    <span class="check-mark"></span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ìè¨Ïù∏Ìä∏ ÏÑπÏÖò -->
                <div class="nav-section">
                    <div class="nav-category">
                        <div class="nav-category-wrapper">
                            <button class="nav-category-button">
                                <i class="fas fa-coins"></i>
                                <span>Ìè¨Ïù∏Ìä∏</span>
                                <i class="fas fa-chevron-down nav-arrow"></i>
                            </button>
                            <div class="nav-items">
                                <a href="points-policy.html" class="nav-item highlighted">
                                    <i class="fas fa-scroll"></i>
                                    <span>Ìè¨Ïù∏Ìä∏Ï†ïÏ±Ö</span>
                                    <span class="check-mark"></span>
                                </a>
                                <a href="points-ranking.html" class="nav-item">
                                    <i class="fas fa-chart-bar"></i>
                                    <span>Ï†ÑÏ≤¥Îû≠ÌÇπ</span>
                                </a>
                                <a href="points-charge.html" class="nav-item">
                                    <i class="fas fa-credit-card"></i>
                                    <span>Ï∂©Ï†ÑÌïòÍ∏∞</span>
                                </a>
                                <a href="points-shop.html" class="nav-item">
                                    <i class="fas fa-store"></i>
                                    <span>ÏÉÅÏ†ê</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÎØ∏ÎãàÍ≤åÏûÑ ÏÑπÏÖò -->
                <div class="nav-section minigame-section">
                    <div class="minigame-header">
                        <i class="fas fa-gamepad"></i>
                        <span>ÎØ∏ÎãàÍ≤åÏûÑ</span>
                    </div>
                    <div class="minigame-buttons">
                        <a href="game.html" class="minigame-btn">
                            <i class="fas fa-gamepad"></i>
                            <span>Î™®Îì† Í≤åÏûÑ</span>
                        </a>
                        <a href="game.html?open=roulette" class="minigame-btn">
                            <i class="fas fa-circle-notch"></i>
                            <span>Î£∞Î†õ</span>
                        </a>
                        <a href="game.html?open=blackjack" class="minigame-btn">
                            <i class="fas fa-layer-group"></i>
                            <span>Î∏îÎûôÏû≠</span>
                        </a>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† ÏòÅÏó≠ -->
        <div class="main-container">
            <!-- Ìó§Îçî (ÎèôÏ†Å Î°úÎìú) -->
            <div id="header-container">
                <!-- HeaderLoaderÍ∞Ä ÎèôÏ†ÅÏúºÎ°ú Ìó§ÎçîÎ•º Ïó¨Í∏∞Ïóê Î°úÎìúÌï©ÎãàÎã§ -->
            </div>

            <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† -->
            <main class="main-content">
                <div class="signup-container">
                    <!-- Ìó§Îçî -->
                    <div class="signup-header">
                        <h1 class="signup-title">ÌöåÏõêÍ∞ÄÏûÖ</h1>
                        <p class="signup-subtitle">ÏÉàÎ°úÏö¥ Í≥ÑÏ†ïÏùÑ ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî</p>
                    </div>

                    <!-- ÌöåÏõêÍ∞ÄÏûÖ Ìèº -->
                    <div class="signup-card">
                        <!-- Í∏∞Î≥∏ Ï†ïÎ≥¥ ÏÑπÏÖò -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-user"></i>
                                Í∏∞Î≥∏ Ï†ïÎ≥¥
                            </h3>
                            <p class="section-description">ÌöåÏõêÍ∞ÄÏûÖÏóê ÌïÑÏöîÌïú Í∏∞Î≥∏ Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.</p>

                            <form id="signupForm" onsubmit="handleSignup(event)">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="userId">
                                            ÏïÑÏù¥Îîî <span class="required">*</span>
                                        </label>
                                        <div class="input-with-button">
                                            <input type="text" id="userId" class="form-input" required 
                                                   placeholder="ÏïÑÏù¥ÎîîÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" minlength="4" maxlength="20">
                                            <button type="button" class="check-btn" onclick="checkUserIdDuplicate()">Ï§ëÎ≥µÌôïÏù∏</button>
                                        </div>
                                        <div id="userIdStatus" class="field-status"></div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="nickname">
                                            ÎãâÎÑ§ÏûÑ <span class="required">*</span>
                                        </label>
                                        <div class="input-with-button">
                                            <input type="text" id="nickname" class="form-input" required 
                                                   placeholder="ÎãâÎÑ§ÏûÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" minlength="2" maxlength="15">
                                            <button type="button" class="check-btn" onclick="checkNicknameDuplicate()">Ï§ëÎ≥µÌôïÏù∏</button>
                                        </div>
                                        <div id="nicknameStatus" class="field-status"></div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="password">
                                            ÎπÑÎ∞ÄÎ≤àÌò∏ <span class="required">*</span>
                                        </label>
                                        <input type="password" id="password" class="form-input" required 
                                               placeholder="8Ïûê Ïù¥ÏÉÅ, ÌäπÏàòÎ¨∏Ïûê Ìè¨Ìï®" minlength="8">
                                        <div class="password-requirements">
                                            <span class="requirement" id="lengthReq">‚úó 8Ïûê Ïù¥ÏÉÅ</span>
                                            <span class="requirement" id="specialReq">‚úó ÌäπÏàòÎ¨∏Ïûê</span>
                                            <span class="requirement" id="numberReq">‚úó Ïà´Ïûê</span>
                                        </div>
                                        <div id="passwordStatus" class="field-status"></div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="confirmPassword">
                                            ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏ <span class="required">*</span>
                                        </label>
                                        <input type="password" id="confirmPassword" class="form-input" required 
                                               placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º Îã§Ïãú ÏûÖÎ†•ÌïòÏÑ∏Ïöî" minlength="8">
                                        <div id="confirmPasswordStatus" class="field-status"></div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="email">
                                            Ïù¥Î©îÏùº <span class="required">*</span>
                                        </label>
                                        <input type="email" id="email" class="form-input" required 
                                               placeholder="Ïù¥Î©îÏùºÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                                        <div id="emailStatus" class="field-status"></div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="fullName">
                                            Ïã§Î™Ö <span class="required">*</span>
                                        </label>
                                        <input type="text" id="fullName" class="form-input" required 
                                               placeholder="Ïã§Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="phone">
                                            Ïó∞ÎùΩÏ≤ò <span class="required">*</span>
                                        </label>
                                        <div class="input-with-button">
                                            <input type="tel" id="phone" class="form-input" required 
                                                   placeholder="010-1234-5678" pattern="010-[0-9]{4}-[0-9]{4}">
                                            <button type="button" class="check-btn" id="requestVerificationBtn" onclick="requestPhoneVerification()" disabled style="opacity: 0.6;">Î≥∏Ïù∏Ïù∏Ï¶ù</button>
                                        </div>
                                        <div id="phoneStatus" class="field-status"></div>
                                        
                                        <!-- reCAPTCHA Ïª®ÌÖåÏù¥ÎÑà (visible Î™®Îìú) -->
                                        <div class="recaptcha-wrapper" style="margin: 16px 0;">
                                            <div id="recaptcha-container">
                                                <div style="width: 304px; height: 78px; border: 2px dashed #d3d3d3; border-radius: 3px; background: #f9f9f9; display: flex; align-items: center; justify-content: center; font-size: 14px; color: #666;">
                                                    <i class="fas fa-spinner fa-spin" style="margin-right: 8px;"></i>
                                                    reCAPTCHA Î°úÎî© Ï§ë...
                                                </div>
                                            </div>
                                            <div class="recaptcha-help-text" id="recaptcha-help-text" style="display: none;">
                                                Î°úÎ¥áÏù¥ ÏïÑÎãòÏùÑ Ï≤¥ÌÅ¨Ìïú ÌõÑ Î≥∏Ïù∏Ïù∏Ï¶ù Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî.
                                                <br><span style="font-size: 10px; color: #999;">(localhostÏóêÏÑúÎäî ÌÖåÏä§Ìä∏ Î™®ÎìúÎ°ú ÎèôÏûëÌï©ÎãàÎã§)</span>
                                            </div>
                                        </div>
                                        
                                        <!-- Ïù∏Ï¶ùÎ≤àÌò∏ ÏûÖÎ†• ÏÑπÏÖò (Ï≤òÏùåÏóêÎäî Ïà®ÍπÄ) -->
                                        <div id="verificationSection" class="verification-section" style="display: none;">
                                            
                                            <div class="form-group verification-group">
                                                <label class="form-label" for="verificationCode">
                                                    Ïù∏Ï¶ùÎ≤àÌò∏ <span class="required">*</span>
                                                </label>
                                                <div class="input-with-button">
                                                    <input type="text" id="verificationCode" class="form-input" 
                                                           placeholder="6ÏûêÎ¶¨ Ïù∏Ï¶ùÎ≤àÌò∏ ÏûÖÎ†•" maxlength="6" pattern="[0-9]{6}">
                                                    <button type="button" class="check-btn" onclick="verifyPhoneCode()">ÌôïÏù∏</button>
                                                </div>
                                                <div class="verification-info">
                                                    <span id="verificationTimer" class="timer">03:00</span>
                                                    <button type="button" class="resend-btn" id="resendBtn" onclick="requestPhoneVerification()" disabled>Ïû¨Î∞úÏÜ°</button>
                                                </div>
                                                <div id="verificationCodeStatus" class="field-status"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </div>

                        <!-- ÌöåÏõê Ïú†Ìòï ÏÑ†ÌÉù ÏÑπÏÖò -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-briefcase"></i>
                                ÌöåÏõê Ïú†Ìòï
                            </h3>
                            <p class="section-description">Í∑ÄÌïòÏùò ÏßÅÏóÖÏù¥ÎÇò Í¥ÄÏã¨ Î∂ÑÏïºÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.</p>
                            
                            <div class="member-type-list">
                                <div class="member-type-item selected" onclick="selectMemberType('ÏùºÎ∞ò')">
                                    <input type="radio" name="memberType" value="ÏùºÎ∞ò" id="general" checked>
                                    <div class="member-type-title">ÏùºÎ∞ò ÌöåÏõê</div>
                                    <div class="member-type-desc">Î∂ÄÎèôÏÇ∞Ïóê Í¥ÄÏã¨ ÏûàÎäî ÏùºÎ∞òÏù∏</div>
                                </div>

                                <div class="member-type-item" onclick="selectMemberType('Î∂ÑÏñëÍ∏∞Ìöç')" data-practitioner="true">
                                    <input type="radio" name="memberType" value="Î∂ÑÏñëÍ∏∞Ìöç" id="planning">
                                    <div class="member-type-title">Î∂ÑÏñëÍ∏∞Ìöç</div>
                                    <div class="member-type-desc">Î∂ÑÏñëÍ∏∞Ìöç ÏóÖÎ¨¥ Îã¥ÎãπÏûê <span class="practitioner-badge">Ïã§Î¨¥Ïûê Ïù∏Ï¶ù Í∞ÄÎä•</span></div>
                                </div>

                                <div class="member-type-item" onclick="selectMemberType('Î∂ÑÏñëÏòÅÏóÖ')">
                                    <input type="radio" name="memberType" value="Î∂ÑÏñëÏòÅÏóÖ" id="sales">
                                    <div class="member-type-title">Î∂ÑÏñëÏòÅÏóÖ</div>
                                    <div class="member-type-desc">Î∂ÑÏñëÏòÅÏóÖ ÏóÖÎ¨¥ Îã¥ÎãπÏûê</div>
                                </div>

                                <div class="member-type-item" onclick="selectMemberType('Ï≤≠ÏïΩÏÉÅÎã¥')">
                                    <input type="radio" name="memberType" value="Ï≤≠ÏïΩÏÉÅÎã¥" id="consulting">
                                    <div class="member-type-title">Ï≤≠ÏïΩÏÉÅÎã¥</div>
                                    <div class="member-type-desc">Ï≤≠ÏïΩÏÉÅÎã¥ ÏóÖÎ¨¥ Îã¥ÎãπÏûê</div>
                                </div>

                                <div class="member-type-item" onclick="selectMemberType('Í¥ÄÍ≥ÑÏÇ¨')" data-practitioner="true">
                                    <input type="radio" name="memberType" value="Í¥ÄÍ≥ÑÏÇ¨" id="partner">
                                    <div class="member-type-title">Í¥ÄÍ≥ÑÏÇ¨</div>
                                    <div class="member-type-desc">ÌòëÎ†•ÏóÖÏ≤¥ Î∞è Í¥ÄÎ†® Í∏∞ÏóÖ <span class="practitioner-badge">Ïã§Î¨¥Ïûê Ïù∏Ï¶ù Í∞ÄÎä•</span></div>
                                </div>
                            </div>

                            <!-- Ïã§Î¨¥Ïûê Ïù∏Ï¶ù ÏïàÎÇ¥ -->
                            <div id="practitionerNotice" class="practitioner-notice" style="display: none;">
                                <div class="notice-icon">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <div class="notice-content">
                                    <strong>Ïã§Î¨¥Ïûê Ïù∏Ï¶ù ÏïàÎÇ¥</strong>
                                    <p>Î∂ÑÏñëÍ∏∞Ìöç, Í¥ÄÍ≥ÑÏÇ¨ ÌöåÏõêÏùÄ Í∞ÄÏûÖ ÌõÑ ÎßàÏù¥ÌéòÏù¥ÏßÄÏóêÏÑú Ïã§Î¨¥Ïûê Ïù∏Ï¶ùÏùÑ Î∞õÏúºÏã§ Ïàò ÏûàÏäµÎãàÎã§.</p>
                                    <p>Ïã§Î¨¥Ïûê Ïù∏Ï¶ù Ïãú ÏãúÏû•Ï°∞ÏÇ¨ÏÑú Î∞è Ï†úÏïàÏÑú Îã§Ïö¥Î°úÎìú Í∂åÌïúÏù¥ Î∂ÄÏó¨Îê©ÎãàÎã§.</p>
                                </div>
                            </div>

                            <!-- ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÏûÖÎ†• (ÏÑ†ÌÉùÌïú Ïú†ÌòïÏóê Îî∞Îùº ÌëúÏãú) -->
                            <div id="additionalInfoSection" class="additional-info" style="display: none;">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="company">ÌöåÏÇ¨Î™Ö</label>
                                        <input type="text" id="company" class="form-input" placeholder="ÏÜåÏÜç ÌöåÏÇ¨Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label" for="department">Î∂ÄÏÑú/ÏßÅÏ±Ö</label>
                                        <input type="text" id="department" class="form-input" placeholder="Î∂ÄÏÑúÎÇò ÏßÅÏ±ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="experience">Í≤ΩÎ†•</label>
                                    <select id="experience" class="form-input">
                                        <option value="">Í≤ΩÎ†•ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                        <option value="Ïã†ÏûÖ">Ïã†ÏûÖ</option>
                                        <option value="1-3ÎÖÑ">1-3ÎÖÑ</option>
                                        <option value="3-5ÎÖÑ">3-5ÎÖÑ</option>
                                        <option value="5-10ÎÖÑ">5-10ÎÖÑ</option>
                                        <option value="10ÎÖÑ Ïù¥ÏÉÅ">10ÎÖÑ Ïù¥ÏÉÅ</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- ÏïΩÍ¥Ä ÎèôÏùò ÏÑπÏÖò -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-file-contract"></i>
                                ÏïΩÍ¥Ä ÎèôÏùò
                            </h3>

                            <div class="terms-section">
                                <div class="terms-all" onclick="toggleAllTerms()">
                                    <div class="terms-checkbox" id="allTermsCheck">
                                        <i class="fas fa-check" style="display: none;"></i>
                                    </div>
                                    <div class="terms-text">
                                        <strong>Ï†ÑÏ≤¥ ÏïΩÍ¥ÄÏóê ÎèôÏùòÌï©ÎãàÎã§</strong>
                                    </div>
                                </div>

                                <div class="terms-list">
                                    <div class="terms-item" onclick="toggleTerm('terms1')">
                                        <div class="terms-checkbox" id="terms1Check">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="terms-text">
                                            <span class="required">*</span> ÏÑúÎπÑÏä§ Ïù¥Ïö©ÏïΩÍ¥Ä ÎèôÏùò
                                        </div>
                                        <a href="#" class="terms-link">Î≥¥Í∏∞</a>
                                    </div>

                                    <div class="terms-item" onclick="toggleTerm('terms2')">
                                        <div class="terms-checkbox" id="terms2Check">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="terms-text">
                                            <span class="required">*</span> Í∞úÏù∏Ï†ïÎ≥¥ ÏàòÏßë Î∞è Ïù¥Ïö© ÎèôÏùò
                                        </div>
                                        <a href="#" class="terms-link">Î≥¥Í∏∞</a>
                                    </div>

                                    <div class="terms-item" onclick="toggleTerm('terms3')">
                                        <div class="terms-checkbox" id="terms3Check">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="terms-text">
                                            ÎßàÏºÄÌåÖ Ï†ïÎ≥¥ ÏàòÏã† ÎèôÏùò (ÏÑ†ÌÉù)
                                        </div>
                                        <a href="#" class="terms-link">Î≥¥Í∏∞</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ï†úÏ∂ú ÏÑπÏÖò -->
                        <div class="submit-section">
                            <button type="submit" class="btn-submit" id="submitBtn">
                                <span class="btn-text">ÌöåÏõêÍ∞ÄÏûÖ</span>
                                <div class="loading">
                                    <div class="spinner"></div>
                                </div>
                            </button>

                            <div id="errorMessage" class="error-message"></div>
                            <div id="successMessage" class="success-message"></div>
                        </div>

                        </form>

                        <!-- Î°úÍ∑∏Ïù∏ ÎßÅÌÅ¨ -->
                        <div class="login-link">
                            Ïù¥ÎØ∏ Í≥ÑÏ†ïÏù¥ ÏûàÏúºÏã†Í∞ÄÏöî? 
                            <a href="login.html">Î°úÍ∑∏Ïù∏ÌïòÍ∏∞</a>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="script.js?v=3"></script>
    <script src="js/config/supabase.js?v=2025082903"></script>
    <script src="js/config/firebase.js?v=2025082903"></script>
    <script src="js/services/phoneAuthService.js?v=2025082903"></script>
    <script src="js/services/authService.js?v=2025082903"></script>
    <script src="js/modules/toast.js?v=2025082903"></script>
    
    <script>
        // ÌéòÏù¥ÏßÄ Î°úÎî© Ïãú Ï¶âÏãú Î≥¥Ïù¥Í≤å ÌïòÍ∏∞
        document.body.classList.add('loaded');
        
        // Firebase ÏûêÎèô Ï¥àÍ∏∞Ìôî (ÌéòÏù¥ÏßÄ Î°úÎìú ÏôÑÎ£å ÌõÑ)
        document.addEventListener('DOMContentLoaded', function() {
            // Firebase ÏÑúÎπÑÏä§Í∞Ä Î°úÎìúÎê† ÎïåÍπåÏßÄ ÎåÄÍ∏∞
            let initAttempts = 0;
            const maxAttempts = 50; // 5Ï¥à ÎåÄÍ∏∞
            
            const initFirebase = () => {
                if (window.firebaseService && typeof window.firebaseService.init === 'function') {
                    console.log('üî• Firebase ÏûêÎèô Ï¥àÍ∏∞Ìôî ÏãúÏûë...');
                    window.firebaseService.init();
                } else if (initAttempts < maxAttempts) {
                    initAttempts++;
                    setTimeout(initFirebase, 100);
                } else {
                    console.warn('‚ö†Ô∏è Firebase ÏÑúÎπÑÏä§Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§. ÏàòÎèôÏúºÎ°ú Ï¥àÍ∏∞ÌôîÌï¥Ï£ºÏÑ∏Ïöî.');
                }
            };
            
            // 100ms ÌõÑ Ï¥àÍ∏∞Ìôî ÏãúÏûë
            setTimeout(initFirebase, 100);
        });
        
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let isUserIdValid = false;
        let isNicknameValid = false;
        let isPhoneVerified = false;
        let verificationTimer = null;
        let timeLeft = 180; // 3Î∂Ñ = 180Ï¥à
        let selectedMemberType = 'ÏùºÎ∞ò'; // Í∏∞Î≥∏Í∞íÏùÑ 'ÏùºÎ∞ò'ÏúºÎ°ú ÏÑ§Ï†ï
        let termsAgreed = {
            terms1: false,
            terms2: false,
            terms3: false
        };

        // ÏïÑÏù¥Îîî Ï§ëÎ≥µ ÌôïÏù∏
        async function checkUserIdDuplicate() {
            const userId = document.getElementById('userId').value;
            const statusElement = document.getElementById('userIdStatus');
            const inputElement = document.getElementById('userId');
            
            if (!userId || userId.length < 4) {
                statusElement.textContent = 'ÏïÑÏù¥ÎîîÎäî 4Ïûê Ïù¥ÏÉÅ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.';
                statusElement.className = 'field-status invalid';
                inputElement.className = 'form-input invalid';
                isUserIdValid = false;
                return;
            }
            
            try {
                statusElement.textContent = 'Ï§ëÎ≥µ ÌôïÏù∏ Ï§ë...';
                statusElement.className = 'field-status checking';
                inputElement.className = 'form-input checking';
                
                // authServiceÍ∞Ä ÏóÜÍ±∞ÎÇò Ìï®ÏàòÍ∞Ä ÏóÜÏúºÎ©¥ Í∏∞Î≥∏ ÌÜµÍ≥º (Í∞úÎ∞ú Î™®Îìú)
                if (!window.authService || typeof window.authService.checkUserIdDuplicate !== 'function') {
                    console.warn('AuthService Ï§ëÎ≥µ ÌôïÏù∏ Í∏∞Îä•ÏùÑ ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§. Í∞úÎ∞ú Î™®ÎìúÎ°ú ÏßÑÌñâÌï©ÎãàÎã§.');
                    statusElement.textContent = 'ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏïÑÏù¥ÎîîÏûÖÎãàÎã§. (Í∞úÎ∞úÎ™®Îìú)';
                    statusElement.className = 'field-status valid';
                    inputElement.className = 'form-input valid';
                    isUserIdValid = true;
                    return;
                }
                
                const result = await authService.checkUserIdDuplicate(userId);
                
                if (result.available) {
                    statusElement.textContent = 'ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏïÑÏù¥ÎîîÏûÖÎãàÎã§.';
                    statusElement.className = 'field-status valid';
                    inputElement.className = 'form-input valid';
                    isUserIdValid = true;
                } else {
                    statusElement.textContent = 'Ïù¥ÎØ∏ ÏÇ¨Ïö© Ï§ëÏù∏ ÏïÑÏù¥ÎîîÏûÖÎãàÎã§.';
                    statusElement.className = 'field-status invalid';
                    inputElement.className = 'form-input invalid';
                    isUserIdValid = false;
                }
            } catch (error) {
                console.error('ÏïÑÏù¥Îîî Ï§ëÎ≥µ ÌôïÏù∏ Ïò§Î•ò:', error);
                // Ïò§Î•ò Î∞úÏÉù ÏãúÏóêÎèÑ Í∞úÎ∞ú Î™®ÎìúÎ°ú ÌÜµÍ≥º ÌóàÏö©
                if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                    statusElement.textContent = 'ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏïÑÏù¥ÎîîÏûÖÎãàÎã§. (Î°úÏª¨ Í∞úÎ∞úÎ™®Îìú)';
                    statusElement.className = 'field-status valid';
                    inputElement.className = 'form-input valid';
                    isUserIdValid = true;
                } else {
                    statusElement.textContent = 'Ï§ëÎ≥µ ÌôïÏù∏ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.';
                    statusElement.className = 'field-status invalid';
                    inputElement.className = 'form-input invalid';
                    isUserIdValid = false;
                }
            }
        }

        // ÎãâÎÑ§ÏûÑ Ï§ëÎ≥µ ÌôïÏù∏
        async function checkNicknameDuplicate() {
            const nickname = document.getElementById('nickname').value;
            const statusElement = document.getElementById('nicknameStatus');
            const inputElement = document.getElementById('nickname');
            
            if (!nickname || nickname.length < 2) {
                statusElement.textContent = 'ÎãâÎÑ§ÏûÑÏùÄ 2Ïûê Ïù¥ÏÉÅ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.';
                statusElement.className = 'field-status invalid';
                inputElement.className = 'form-input invalid';
                isNicknameValid = false;
                return;
            }
            
            try {
                statusElement.textContent = 'Ï§ëÎ≥µ ÌôïÏù∏ Ï§ë...';
                statusElement.className = 'field-status checking';
                inputElement.className = 'form-input checking';
                
                // authServiceÍ∞Ä ÏóÜÍ±∞ÎÇò Ìï®ÏàòÍ∞Ä ÏóÜÏúºÎ©¥ Í∏∞Î≥∏ ÌÜµÍ≥º (Í∞úÎ∞ú Î™®Îìú)
                if (!window.authService || typeof window.authService.checkNicknameDuplicate !== 'function') {
                    console.warn('AuthService Ï§ëÎ≥µ ÌôïÏù∏ Í∏∞Îä•ÏùÑ ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§. Í∞úÎ∞ú Î™®ÎìúÎ°ú ÏßÑÌñâÌï©ÎãàÎã§.');
                    statusElement.textContent = 'ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§. (Í∞úÎ∞úÎ™®Îìú)';
                    statusElement.className = 'field-status valid';
                    inputElement.className = 'form-input valid';
                    isNicknameValid = true;
                    return;
                }
                
                const result = await authService.checkNicknameDuplicate(nickname);
                
                if (result.available) {
                    statusElement.textContent = 'ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§.';
                    statusElement.className = 'field-status valid';
                    inputElement.className = 'form-input valid';
                    isNicknameValid = true;
                } else {
                    statusElement.textContent = 'Ïù¥ÎØ∏ ÏÇ¨Ïö© Ï§ëÏù∏ ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§.';
                    statusElement.className = 'field-status invalid';
                    inputElement.className = 'form-input invalid';
                    isNicknameValid = false;
                }
            } catch (error) {
                console.error('ÎãâÎÑ§ÏûÑ Ï§ëÎ≥µ ÌôïÏù∏ Ïò§Î•ò:', error);
                // Ïò§Î•ò Î∞úÏÉù ÏãúÏóêÎèÑ Í∞úÎ∞ú Î™®ÎìúÎ°ú ÌÜµÍ≥º ÌóàÏö©
                if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                    statusElement.textContent = 'ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§. (Î°úÏª¨ Í∞úÎ∞úÎ™®Îìú)';
                    statusElement.className = 'field-status valid';
                    inputElement.className = 'form-input valid';
                    isNicknameValid = true;
                } else {
                    statusElement.textContent = 'Ï§ëÎ≥µ ÌôïÏù∏ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.';
                    statusElement.className = 'field-status invalid';
                    inputElement.className = 'form-input invalid';
                    isNicknameValid = false;
                }
            }
        }

        // Ìï∏ÎìúÌè∞ Î≥∏Ïù∏Ïù∏Ï¶ù ÏöîÏ≤≠ (Firebase ÏÇ¨Ïö©)
        async function requestPhoneVerification() {
            const phone = document.getElementById('phone').value;
            const phoneStatus = document.getElementById('phoneStatus');
            const requestBtn = document.getElementById('requestVerificationBtn');
            const recaptchaContainer = document.getElementById('recaptcha-container');
            
            // Ìï∏ÎìúÌè∞ Î≤àÌò∏ Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
            const phonePattern = /^010-\d{4}-\d{4}$/;
            if (!phone || !phonePattern.test(phone)) {
                phoneStatus.textContent = 'Ïò¨Î∞îÎ•∏ Ìï∏ÎìúÌè∞ Î≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî (010-0000-0000)';
                phoneStatus.className = 'field-status invalid';
                return;
            }
            
            try {
                // Î°úÎî© ÏÉÅÌÉú
                requestBtn.disabled = true;
                requestBtn.textContent = 'Î∞úÏÜ°Ï§ë...';
                phoneStatus.textContent = 'Ïù∏Ï¶ùÎ≤àÌò∏Î•º Î∞úÏÜ°ÌïòÍ≥† ÏûàÏäµÎãàÎã§...';
                phoneStatus.className = 'field-status checking';
                
                // Firebase Ïù∏Ï¶ù ÏÑúÎπÑÏä§ ÏÇ¨Ïö©
                let result;
                if (window.phoneAuthService) {
                    result = await phoneAuthService.requestVerification(phone);
                    
                    // Ïã§Ï†ú SMS Î∞úÏÜ° ÏÑ±Í≥µ
                    if (result.success) {
                        startVerificationTimer();
                    }
                } else {
                    throw new Error('Ï†ÑÌôîÎ≤àÌò∏ Ïù∏Ï¶ù ÏÑúÎπÑÏä§Î•º ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§. ÌéòÏù¥ÏßÄÎ•º ÏÉàÎ°úÍ≥†Ïπ®Ìï¥Ï£ºÏÑ∏Ïöî.');
                }
                
                if (result.success) {
                    // ÏÑ±Í≥µ Î©îÏãúÏßÄ
                    phoneStatus.textContent = result.message;
                    phoneStatus.className = 'field-status valid';
                    
                    // Ïù∏Ï¶ùÎ≤àÌò∏ ÏûÖÎ†• ÏÑπÏÖò ÌëúÏãú
                    document.getElementById('verificationSection').style.display = 'block';
                    
                    // Î≤ÑÌäº ÏÉÅÌÉú Î≥ÄÍ≤Ω
                    requestBtn.textContent = 'Ïû¨Î∞úÏÜ°';
                    requestBtn.disabled = false;
                    requestBtn.style.opacity = '1';
                } else {
                    throw new Error(result.error);
                }
                
            } catch (error) {
                console.error('Ïù∏Ï¶ùÎ≤àÌò∏ Î∞úÏÜ° Ïò§Î•ò:', error);
                
                // ÏÇ¨Ïö©Ïûê ÏπúÌôîÏ†Å ÏóêÎü¨ Î©îÏãúÏßÄ
                let userMessage = error.message;
                if (error.message.includes('reCAPTCHAÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§')) {
                    userMessage = 'reCAPTCHA Î°úÎî© Ï§ëÏûÖÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.';
                } else if (error.message.includes('reCAPTCHAÍ∞Ä Î°úÎìúÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§')) {
                    userMessage = 'reCAPTCHAÎ•º Î®ºÏ†Ä Ï≤¥ÌÅ¨Ìï¥Ï£ºÏÑ∏Ïöî.';
                } else if (error.message.includes('reCAPTCHA Ïù∏Ï¶ùÏóê Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§')) {
                    userMessage = 'reCAPTCHAÎ•º Îã§Ïãú Ï≤¥ÌÅ¨Ìïú ÌõÑ ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.';
                }
                
                phoneStatus.textContent = userMessage;
                phoneStatus.className = 'field-status invalid';
                requestBtn.disabled = true;
                requestBtn.style.opacity = '0.6';
                requestBtn.textContent = 'Î≥∏Ïù∏Ïù∏Ï¶ù';
            }
        }

        // Ïù∏Ï¶ùÎ≤àÌò∏ ÌôïÏù∏ (Firebase ÏÇ¨Ïö©)
        async function verifyPhoneCode() {
            const inputCode = document.getElementById('verificationCode').value;
            const codeStatus = document.getElementById('verificationCodeStatus');
            const verifyBtn = document.querySelector('#verificationSection .check-btn');
            
            if (!inputCode || inputCode.length !== 6) {
                codeStatus.textContent = '6ÏûêÎ¶¨ Ïù∏Ï¶ùÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.';
                codeStatus.className = 'field-status invalid';
                return;
            }
            
            try {
                // Î°úÎî© ÏÉÅÌÉú
                verifyBtn.disabled = true;
                verifyBtn.textContent = 'ÌôïÏù∏Ï§ë...';
                codeStatus.textContent = 'Ïù∏Ï¶ùÎ≤àÌò∏Î•º ÌôïÏù∏ÌïòÍ≥† ÏûàÏäµÎãàÎã§...';
                codeStatus.className = 'field-status checking';
                
                // PhoneAuthServiceÎ•º ÌÜµÌïú Ïã§Ï†ú Firebase Ïù∏Ï¶ù
                if (!window.phoneAuthService || !window.phoneAuthService.confirmationResult) {
                    throw new Error('Ïù∏Ï¶ù ÏÑ∏ÏÖòÏù¥ ÎßåÎ£åÎêòÏóàÏäµÎãàÎã§. Îã§Ïãú ÏöîÏ≤≠Ìï¥Ï£ºÏÑ∏Ïöî.');
                }
                
                const result = await phoneAuthService.verifyCode(inputCode);
                
                if (result.success) {
                    codeStatus.textContent = result.message;
                    codeStatus.className = 'field-status valid';
                    isPhoneVerified = true;
                    
                    // Ïù∏Ï¶ù ÏôÑÎ£å ÌõÑ UI ÎπÑÌôúÏÑ±Ìôî
                    document.getElementById('verificationCode').disabled = true;
                    verifyBtn.disabled = true;
                    verifyBtn.textContent = 'Ïù∏Ï¶ùÏôÑÎ£å';
                    document.getElementById('resendBtn').disabled = true;
                    document.getElementById('verificationTimer').textContent = 'Ïù∏Ï¶ùÏôÑÎ£å';
                    
                    // reCAPTCHA Ïª®ÌÖåÏù¥ÎÑà Ïà®Í∏∞Í∏∞
                    document.getElementById('recaptcha-container').style.display = 'none';
                    
                } else {
                    throw new Error(result.error);
                }
                
            } catch (error) {
                console.error('Ïù∏Ï¶ùÎ≤àÌò∏ ÌôïÏù∏ Ïò§Î•ò:', error);
                codeStatus.textContent = error.message || 'Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§.';
                codeStatus.className = 'field-status invalid';
                isPhoneVerified = false;
                verifyBtn.disabled = false;
                verifyBtn.textContent = 'ÌôïÏù∏';
            }
        }

        // Ïù∏Ï¶ù ÌÉÄÏù¥Î®∏ ÏãúÏûë (PhoneAuthServiceÍ∞Ä ÏóÜÏùÑ Îïå FallbackÏö©)
        function startVerificationTimer() {
            // PhoneAuthServiceÍ∞Ä ÌÉÄÏù¥Î®∏Î•º Í¥ÄÎ¶¨ÌïòÎäî Í≤ΩÏö∞ Ï§ëÎ≥µ Ïã§Ìñâ Î∞©ÏßÄ
            if (window.phoneAuthService && window.phoneAuthService.verificationTimer) {
                return;
            }
            
            timeLeft = 180; // 3Î∂Ñ Ï¥àÍ∏∞Ìôî
            const timerElement = document.getElementById('verificationTimer');
            const resendBtn = document.getElementById('resendBtn');
            
            // Ïû¨Î∞úÏÜ° Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
            if (resendBtn) resendBtn.disabled = true;
            
            verificationTimer = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                if (timerElement) {
                    timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
                
                if (timeLeft <= 0) {
                    clearInterval(verificationTimer);
                    if (timerElement) timerElement.textContent = 'ÏãúÍ∞ÑÏ¥àÍ≥º';
                    if (resendBtn) resendBtn.disabled = false;
                    // ÌÉÄÏù¥Î®∏ Ï†ïÎ¶¨
                }
                
                timeLeft--;
            }, 1000);
        }

        // ÌöåÏõê Ïú†Ìòï ÏÑ†ÌÉù
        function selectMemberType(type) {
            // Î™®Îì† ÏÑ†ÌÉù Ìï¥Ï†ú
            document.querySelectorAll('.member-type-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // ÏÑ†ÌÉùÌïú Ìï≠Î™© ÌôúÏÑ±Ìôî
            const selectedItem = document.querySelector(`.member-type-item input[value="${type}"]`).closest('.member-type-item');
            selectedItem.classList.add('selected');
            
            // ÎùºÎîîÏò§ Î≤ÑÌäº Ï≤¥ÌÅ¨
            const radioId = selectedItem.querySelector('input').id;
            document.getElementById(radioId).checked = true;
            selectedMemberType = type;
            
            // ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÏÑπÏÖò ÌëúÏãú/Ïà®ÍπÄ
            const additionalSection = document.getElementById('additionalInfoSection');
            if (type !== 'ÏùºÎ∞ò') {
                additionalSection.style.display = 'block';
            } else {
                additionalSection.style.display = 'none';
            }
            
            // Ïã§Î¨¥Ïûê Ïù∏Ï¶ù ÏïàÎÇ¥ ÌëúÏãú/Ïà®ÍπÄ
            const practitionerNotice = document.getElementById('practitionerNotice');
            if (type === 'Î∂ÑÏñëÍ∏∞Ìöç' || type === 'Í¥ÄÍ≥ÑÏÇ¨') {
                practitionerNotice.style.display = 'block';
            } else {
                practitionerNotice.style.display = 'none';
            }
        }

        // ÏïΩÍ¥Ä Í∞úÎ≥Ñ ÌÜ†Í∏Ä
        function toggleTerm(termId) {
            termsAgreed[termId] = !termsAgreed[termId];
            
            const checkbox = document.getElementById(termId + 'Check');
            const checkIcon = checkbox.querySelector('i');
            
            if (termsAgreed[termId]) {
                checkbox.classList.add('checked');
                checkIcon.style.display = 'block';
            } else {
                checkbox.classList.remove('checked');
                checkIcon.style.display = 'none';
            }
            
            // Ï†ÑÏ≤¥ ÎèôÏùò ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
            updateAllTermsState();
        }

        // Ï†ÑÏ≤¥ ÏïΩÍ¥Ä ÎèôÏùò ÌÜ†Í∏Ä
        function toggleAllTerms() {
            const allChecked = termsAgreed.terms1 && termsAgreed.terms2 && termsAgreed.terms3;
            const newState = !allChecked;
            
            // Î™®Îì† ÏïΩÍ¥Ä ÏÉÅÌÉú Î≥ÄÍ≤Ω
            Object.keys(termsAgreed).forEach(termId => {
                termsAgreed[termId] = newState;
                
                const checkbox = document.getElementById(termId + 'Check');
                const checkIcon = checkbox.querySelector('i');
                
                if (newState) {
                    checkbox.classList.add('checked');
                    checkIcon.style.display = 'block';
                } else {
                    checkbox.classList.remove('checked');
                    checkIcon.style.display = 'none';
                }
            });
            
            // Ï†ÑÏ≤¥ ÎèôÏùò Ï≤¥ÌÅ¨Î∞ïÏä§ ÏóÖÎç∞Ïù¥Ìä∏
            updateAllTermsState();
        }

        // Ï†ÑÏ≤¥ ÏïΩÍ¥Ä ÎèôÏùò ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        function updateAllTermsState() {
            const allTermsCheck = document.getElementById('allTermsCheck');
            const allTermsIcon = allTermsCheck.querySelector('i');
            const termsAllContainer = document.querySelector('.terms-all');
            
            const allChecked = termsAgreed.terms1 && termsAgreed.terms2 && termsAgreed.terms3;
            
            if (allChecked) {
                allTermsCheck.classList.add('checked');
                allTermsIcon.style.display = 'block';
                termsAllContainer.classList.add('checked');
            } else {
                allTermsCheck.classList.remove('checked');
                allTermsIcon.style.display = 'none';
                termsAllContainer.classList.remove('checked');
            }
        }

        // ÎπÑÎ∞ÄÎ≤àÌò∏ Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
        function validatePassword(password) {
            const lengthReq = document.getElementById('lengthReq');
            const specialReq = document.getElementById('specialReq');
            const numberReq = document.getElementById('numberReq');
            
            const hasMinLength = password.length >= 8;
            const hasSpecialChar = /[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]/.test(password);
            const hasNumber = /\d/.test(password);
            
            // Í∏∏Ïù¥ ÏöîÍµ¨ÏÇ¨Ìï≠
            if (hasMinLength) {
                lengthReq.textContent = '‚úì 8Ïûê Ïù¥ÏÉÅ';
                lengthReq.className = 'requirement valid';
            } else {
                lengthReq.textContent = '‚úó 8Ïûê Ïù¥ÏÉÅ';
                lengthReq.className = 'requirement invalid';
            }
            
            // ÌäπÏàòÎ¨∏Ïûê ÏöîÍµ¨ÏÇ¨Ìï≠
            if (hasSpecialChar) {
                specialReq.textContent = '‚úì ÌäπÏàòÎ¨∏Ïûê';
                specialReq.className = 'requirement valid';
            } else {
                specialReq.textContent = '‚úó ÌäπÏàòÎ¨∏Ïûê';
                specialReq.className = 'requirement invalid';
            }
            
            // Ïà´Ïûê ÏöîÍµ¨ÏÇ¨Ìï≠ (Í∂åÏû•)
            if (hasNumber) {
                numberReq.textContent = '‚úì Ïà´Ïûê';
                numberReq.className = 'requirement valid';
            } else {
                numberReq.textContent = '‚úó Ïà´Ïûê';
                numberReq.className = 'requirement optional';
            }
            
            return hasMinLength && hasSpecialChar;
        }

        // Ïã§ÏãúÍ∞Ñ Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
        document.getElementById('userId').addEventListener('input', function() {
            isUserIdValid = false;
            const statusElement = document.getElementById('userIdStatus');
            statusElement.textContent = '';
            statusElement.className = 'field-status';
            this.className = 'form-input';
        });

        document.getElementById('nickname').addEventListener('input', function() {
            isNicknameValid = false;
            const statusElement = document.getElementById('nicknameStatus');
            statusElement.textContent = '';
            statusElement.className = 'field-status';
            this.className = 'form-input';
        });

        // ÎπÑÎ∞ÄÎ≤àÌò∏ Ïã§ÏãúÍ∞Ñ Í≤ÄÏÇ¨
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            const isValid = validatePassword(password);
            const statusElement = document.getElementById('passwordStatus');
            
            if (password.length === 0) {
                statusElement.textContent = '';
                statusElement.className = 'field-status';
            } else if (isValid) {
                statusElement.textContent = 'ÏïàÏ†ÑÌïú ÎπÑÎ∞ÄÎ≤àÌò∏ÏûÖÎãàÎã§.';
                statusElement.className = 'field-status valid';
            } else {
                statusElement.textContent = 'ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏöîÍµ¨ÏÇ¨Ìï≠ÏùÑ Ï∂©Ï°±ÌïòÏßÄ ÏïäÏäµÎãàÎã§.';
                statusElement.className = 'field-status invalid';
            }
        });

        // ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏ Ïã§ÏãúÍ∞Ñ Í≤ÄÏÇ¨
        document.getElementById('confirmPassword').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;
            const statusElement = document.getElementById('confirmPasswordStatus');
            
            if (confirmPassword && password !== confirmPassword) {
                statusElement.textContent = 'ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§.';
                statusElement.className = 'field-status invalid';
                this.className = 'form-input invalid';
            } else if (confirmPassword && password === confirmPassword) {
                statusElement.textContent = 'ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌï©ÎãàÎã§.';
                statusElement.className = 'field-status valid';
                this.className = 'form-input valid';
            } else {
                statusElement.textContent = '';
                statusElement.className = 'field-status';
                this.className = 'form-input';
            }
        });

        // Ìèº Ï†úÏ∂ú Ï≤òÎ¶¨
        async function handleSignup(event) {
            event.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const btnText = submitBtn.querySelector('.btn-text');
            const loading = submitBtn.querySelector('.loading');
            const errorMessage = document.getElementById('errorMessage');
            const successMessage = document.getElementById('successMessage');
            
            // Î°úÎî© ÏÉÅÌÉú ÏãúÏûë
            submitBtn.disabled = true;
            btnText.style.display = 'none';
            loading.classList.add('show');
            errorMessage.textContent = '';
            errorMessage.classList.remove('show');
            successMessage.textContent = '';
            successMessage.classList.remove('show');
            
            try {
                // Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
                if (!isUserIdValid) {
                    throw new Error('ÏïÑÏù¥Îîî Ï§ëÎ≥µ ÌôïÏù∏ÏùÑ ÏôÑÎ£åÌï¥Ï£ºÏÑ∏Ïöî.');
                }
                
                if (!isNicknameValid) {
                    throw new Error('ÎãâÎÑ§ÏûÑ Ï§ëÎ≥µ ÌôïÏù∏ÏùÑ ÏôÑÎ£åÌï¥Ï£ºÏÑ∏Ïöî.');
                }
                
                if (!isPhoneVerified) {
                    throw new Error('Ìï∏ÎìúÌè∞ Î≥∏Ïù∏Ïù∏Ï¶ùÏùÑ ÏôÑÎ£åÌï¥Ï£ºÏÑ∏Ïöî.');
                }
                
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                // ÎπÑÎ∞ÄÎ≤àÌò∏ Í∑úÏπô Í≤ÄÏÇ¨
                if (!validatePassword(password)) {
                    throw new Error('ÎπÑÎ∞ÄÎ≤àÌò∏Îäî 8Ïûê Ïù¥ÏÉÅÏù¥Î©∞ ÌäπÏàòÎ¨∏ÏûêÎ•º Ìè¨Ìï®Ìï¥Ïïº Ìï©ÎãàÎã§.');
                }
                
                if (password !== confirmPassword) {
                    throw new Error('ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§.');
                }
                
                if (!selectedMemberType) {
                    throw new Error('ÌöåÏõê Ïú†ÌòïÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
                }
                
                if (!termsAgreed.terms1 || !termsAgreed.terms2) {
                    throw new Error('ÌïÑÏàò ÏïΩÍ¥ÄÏóê ÎèôÏùòÌï¥Ï£ºÏÑ∏Ïöî.');
                }
                
                // Ìèº Îç∞Ïù¥ÌÑ∞ ÏàòÏßë
                const formData = {
                    username: document.getElementById('userId').value,
                    password: password,
                    nickname: document.getElementById('nickname').value,
                    fullName: document.getElementById('fullName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    memberType: selectedMemberType,
                    additionalInfo: {
                        company: document.getElementById('company')?.value || '',
                        department: document.getElementById('department')?.value || '',
                        experience: document.getElementById('experience')?.value || ''
                    },
                    additionalData: {
                        marketingConsent: termsAgreed.terms3
                    }
                };
                
                // authService ÏÇ¨Ïö© Í∞ÄÎä•ÌïúÏßÄ ÌôïÏù∏
                if (window.authService && typeof window.authService.signUp === 'function') {
                    const result = await authService.signUp(
                        formData.username,
                        formData.password,
                        formData.nickname,
                        formData.fullName,
                        formData.email,
                        formData.phone,
                        formData.memberType,
                        formData.additionalInfo,
                        formData.additionalData
                    );
                    
                    if (result.success) {
                        successMessage.textContent = 'ÌöåÏõêÍ∞ÄÏûÖÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§! Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§.';
                        successMessage.classList.add('show');
                        
                        // 3Ï¥à ÌõÑ Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô
                        setTimeout(() => {
                            window.location.href = 'login.html';
                        }, 3000);
                    } else {
                        throw new Error(result.error || 'ÌöåÏõêÍ∞ÄÏûÖÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
                    }
                } else {
                    // Ìè¥Î∞± Ï≤òÎ¶¨
                    console.warn('AuthServiceÎ•º ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§. Ìè¥Î∞± Ï≤òÎ¶¨ Ï§ë...');
                    window.fallbackSignup(formData);
                }
                
            } catch (error) {
                console.error('ÌöåÏõêÍ∞ÄÏûÖ Ïò§Î•ò:', error);
                
                let errorText = error.message || 'ÌöåÏõêÍ∞ÄÏûÖÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.';
                if (error.message.includes('Email already registered')) {
                    errorText = 'Ïù¥ÎØ∏ Í∞ÄÏûÖÎêú Ïù¥Î©îÏùºÏûÖÎãàÎã§.';
                } else if (error.message.includes('Email address') && error.message.includes('is invalid')) {
                    errorText = 'Supabase SMTP ÏÑ§Ï†ïÏù¥ ÌïÑÏöîÌï©ÎãàÎã§. Í∞úÎ∞ú ÌôòÍ≤ΩÏóêÏÑúÎäî ÏûÑÏãú Ïù¥Î©îÏùºÏù¥ ÏÇ¨Ïö©Îê©ÎãàÎã§.';
                } else if (error.message.includes('Password should be at least')) {
                    errorText = 'ÎπÑÎ∞ÄÎ≤àÌò∏Îäî 8Ïûê Ïù¥ÏÉÅÏù¥Î©∞ ÌäπÏàòÎ¨∏ÏûêÎ•º Ìè¨Ìï®Ìï¥Ïïº Ìï©ÎãàÎã§.';
                }
                
                errorMessage.textContent = errorText;
                errorMessage.classList.add('show');
            } finally {
                // Î°úÎî© ÏÉÅÌÉú Ï¢ÖÎ£å
                submitBtn.disabled = false;
                btnText.style.display = 'inline';
                loading.classList.remove('show');
            }
        }
        
        // Ïù∏Ï¶ùÎ≤àÌò∏ ÏûÖÎ†• ÌïÑÎìúÏóê Ïà´ÏûêÎßå ÌóàÏö©
        document.getElementById('verificationCode').addEventListener('input', function(e) {
            // Ïà´ÏûêÍ∞Ä ÏïÑÎãå Î¨∏Ïûê Ï†úÍ±∞
            this.value = this.value.replace(/[^0-9]/g, '');
        });

        // Ìï∏ÎìúÌè∞ ÏûÖÎ†• ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
        document.getElementById('phone').addEventListener('input', function() {
            isPhoneVerified = false;
            document.getElementById('phoneStatus').textContent = '';
            document.getElementById('phoneStatus').className = 'field-status';
            
            // Ïù∏Ï¶ù ÏÑπÏÖò Ïà®Í∏∞Í∏∞
            const verificationSection = document.getElementById('verificationSection');
            const recaptchaContainer = document.getElementById('recaptcha-container');
            if (verificationSection.style.display !== 'none') {
                verificationSection.style.display = 'none';
                recaptchaContainer.style.display = 'none';
                
                // Firebase reCAPTCHA Ï†ïÎ¶¨
                if (window.firebaseService) {
                    firebaseService.clearExistingRecaptcha();
                }
                
                // ÌÉÄÏù¥Î®∏ Ï†ïÎ¶¨
                if (window.phoneAuthService) {
                    phoneAuthService.reset();
                } else {
                    clearInterval(verificationTimer);
                }
            }
            
            // Î≤ÑÌäº ÌÖçÏä§Ìä∏ Ï¥àÍ∏∞Ìôî
            const requestBtn = document.getElementById('requestVerificationBtn');
            requestBtn.textContent = 'Î≥∏Ïù∏Ïù∏Ï¶ù';
            requestBtn.disabled = true;  // reCAPTCHA Ï≤¥ÌÅ¨ Ï†ÑÍπåÏßÄ ÎπÑÌôúÏÑ±Ìôî
            requestBtn.style.opacity = '0.6';
        });

        // Enter ÌÇ§Î°ú Îã§Ïùå ÏûÖÎ†• ÌïÑÎìúÎ°ú Ïù¥Îèô
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.target.classList.contains('form-input')) {
                const form = document.getElementById('signupForm');
                const inputs = Array.from(form.querySelectorAll('input[type="text"], input[type="email"], input[type="password"], input[type="tel"], select'));
                const currentIndex = inputs.indexOf(e.target);
                
                if (currentIndex < inputs.length - 1) {
                    e.preventDefault();
                    inputs[currentIndex + 1].focus();
                }
            }
        });
    </script>
</body>
</html>