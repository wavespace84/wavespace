<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶œì„ì²´í¬ í…ŒìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="attendance.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { padding: 40px; background: #f5f5f5; }
        .debug-info { background: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="debug-info">
        <h2>ğŸ“‹ ì¶œì„ í˜„í™© í…ŒìŠ¤íŠ¸</h2>
        <p>ì½˜ì†”ì„ ì—´ì–´ì„œ ì˜¤ë¥˜ë¥¼ í™•ì¸í•˜ì„¸ìš” (F12)</p>
    </div>
    
    <!-- ì˜¤ëŠ˜ì˜ ì¶œì„ í˜„í™© -->
    <div class="today-attendance">
        <h2 class="section-title">
            <i class="fas fa-users"></i>
            ì˜¤ëŠ˜ì˜ ì¶œì„ í˜„í™© (ìƒìœ„ 30ëª…)
        </h2>
        <div class="attendance-list" id="attendanceList">
            <p>ë¡œë”© ì¤‘...</p>
        </div>
        <div class="my-rank-info" id="myRankInfo">
            <!-- ë‚´ ìˆœìœ„ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <script>
        // ì¶œì„ ë°ì´í„° ì§ì ‘ ì •ì˜ (í…ŒìŠ¤íŠ¸ìš©)
        const attendanceData = [
            { rank: 1, name: 'ê¹€ì˜ì—…ì™•', time: '07:58', message: 'ì˜¤ëŠ˜ë„ ì²« ì¶œì„! ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”!', points: 300, streak: 25, badge: 'ğŸ”¥' },
            { rank: 2, name: 'ì´ê¸°íšì‹ ', time: '08:03', message: 'ì¼ì° ì¼ì–´ë‚˜ëŠ” ìƒˆê°€ ë²Œë ˆë¥¼ ì¡ëŠ”ë‹¤!', points: 300, streak: 18, badge: 'âš¡' },
            { rank: 3, name: 'ë°•íŒ€ì¥ë‹˜', time: '08:12', message: 'ì˜¤ëŠ˜ë„ íŒ€ì›ë“¤ê³¼ í•¨ê»˜ í™”ì´íŒ…!', points: 300, streak: 31, badge: 'ğŸ‘‘' },
            { rank: 4, name: 'ìµœì „ë¬¸ê°€', time: '08:18', message: 'ì „ë¬¸ì„±ìœ¼ë¡œ ë¬´ì¥í•œ í•˜ë£¨ ì‹œì‘!', points: 300, streak: 12, badge: 'ğŸ’¡' },
            { rank: 5, name: 'ì •ë¶„ì–‘ìŠ¤íƒ€', time: '08:25', message: 'ë¶„ì–‘ì˜ ë‹¬ì¸ì´ ì¶œì„í–ˆìŠµë‹ˆë‹¤', points: 300, streak: 22, badge: 'â­' }
        ];

        const currentUser = {
            name: 'ë°•ìŠ¹í•™',
            rank: 25,
            isCheckedIn: false,
            streak: 7,
            badge: 'ğŸƒ'
        };

        function renderAttendanceList() {
            console.log('ğŸ¯ ì¶œì„ ëª©ë¡ ë Œë”ë§ ì‹œì‘');
            const attendanceList = document.getElementById('attendanceList');
            if (!attendanceList) {
                console.error('âŒ attendanceList ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            console.log('âœ… attendanceList ìš”ì†Œ ë°œê²¬:', attendanceList);
            console.log('ğŸ“Š ì¶œì„ ë°ì´í„° ê°œìˆ˜:', attendanceData.length);
            
            // ìƒìœ„ 5ëª…ë§Œ í…ŒìŠ¤íŠ¸ (ì „ì²´ 30ëª…ì€ ë„ˆë¬´ ê¸¸ì–´ì„œ)
            const top5 = attendanceData.slice(0, 5);
            
            const htmlContent = top5.map((user, index) => {
                const isMyRank = user.name === currentUser.name;
                const medalClass = user.rank <= 3 ? `medal-${user.rank}` : '';
                const avatarColorClass = `avatar-${(index % 4) + 1}`;
                
                return `
                    <div class="attendance-item ${isMyRank ? 'my-rank' : ''} ${medalClass}">
                        <div class="rank-badge">
                            <span class="rank-number">${user.rank}</span>
                            ${user.rank <= 3 ? `<i class="fas fa-medal rank-medal"></i>` : ''}
                        </div>
                        <div class="user-profile">
                            <div class="user-avatar-mini ${avatarColorClass}">
                                <span>${user.name.charAt(0)}</span>
                                <div class="streak-badge">${user.badge}</div>
                            </div>
                            <div class="user-details">
                                <span class="user-name">${user.name}</span>
                                <div class="user-meta">
                                    <span class="check-time">
                                        <i class="fas fa-clock"></i> ${user.time}
                                    </span>
                                    <span class="streak-info">
                                        <i class="fas fa-fire"></i> ${user.streak}ì¼ ì—°ì†
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="user-message">
                            <i class="fas fa-quote-left"></i>
                            <span>${user.message}</span>
                        </div>
                        <div class="points-badge">
                            <i class="fas fa-coins"></i>
                            <span>+${user.points}P</span>
                        </div>
                    </div>
                `;
            }).join('');
            
            console.log('ğŸ¨ HTML ìƒì„± ì™„ë£Œ, ê¸¸ì´:', htmlContent.length);
            attendanceList.innerHTML = htmlContent;
            console.log('âœ… ë Œë”ë§ ì™„ë£Œ!');
        }

        function displayMyRankInfo() {
            console.log('ğŸ† ë‚´ ìˆœìœ„ ì •ë³´ í‘œì‹œ ì‹œì‘');
            const myRankInfo = document.getElementById('myRankInfo');
            if (!myRankInfo) return;
            
            if (currentUser.rank <= 30) {
                myRankInfo.innerHTML = `
                    <div class="my-rank-info in-top30">
                        <i class="fas fa-star"></i> ì¶•í•˜í•©ë‹ˆë‹¤! í˜„ì¬ ${currentUser.rank}ë“±ìœ¼ë¡œ ìƒìœ„ 30ìœ„ ì•ˆì— ìœ„ì¹˜í•˜ê³  ìˆìŠµë‹ˆë‹¤!
                    </div>
                `;
            } else {
                myRankInfo.innerHTML = `
                    <div class="my-rank-info out-of-top30">
                        <i class="fas fa-info-circle"></i> í˜„ì¬ ìˆœìœ„ê°€ 30ë“±ì„ ë„˜ì—ˆìŠµë‹ˆë‹¤. ë” ì¼ì° ì¶œì„í•´ë³´ì„¸ìš”!
                    </div>
                `;
            }
            console.log('âœ… ë‚´ ìˆœìœ„ ì •ë³´ í‘œì‹œ ì™„ë£Œ');
        }

        // í˜ì´ì§€ ë¡œë“œ í›„ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            
            setTimeout(() => {
                renderAttendanceList();
                displayMyRankInfo();
            }, 100);
        });
    </script>
</body>
</html>